{"version":3,"sources":["../src/engine/primitives.ts","../src/components/Toolbar.tsx","../src/components/Outliner.tsx","../src/components/PropertiesPanel.tsx","../src/engine/SelectionRenderer.ts","../src/engine/GizmoRenderer.ts","../src/engine/GridRenderer.ts","../src/engine/ModelEngine.ts","../src/engine/raycast.ts","../src/components/Viewport.tsx","../src/components/ViewportOverlay.tsx","../src/components/StatusBar.tsx","../src/index.tsx"],"names":["idCounter","generateId","generateGeoId","DEFAULT_COLOR","createDefaultMaterial","name","createCube","options","width","height","depth","hw","hh","hd","vertices","normals","uvs","indices","edges","faces","i","base","normal","geometry","createSphere","radius","segments","rings","iy","v","phi","ix","u","theta","x","a","b","c","d","edgeSet","tri","j","key","verts","createCylinder","radiusTop","radiusBottom","halfHeight","cos","sin","topCenterIdx","bottomCenterIdx","createPlane","widthSegments","heightSegments","gridX","gridY","y","createTorus","tube","radialSegments","tubularSegments","z","cx","cz","nx","ny","nz","len","createCone","createPrimitive","type","TOOLS","PRIMITIVES","Toolbar","tool","editMode","shadingMode","snapToGrid","onToolChange","onEditModeChange","onShadingModeChange","onSnapToGridChange","onAddPrimitive","onUndo","onRedo","canUndo","canRedo","showAddMenu","setShowAddMenu","useState","jsxs","jsx","t","Fragment","e","Outliner","meshes","selection","onSelect","onToggleVisibility","onToggleLock","onRename","onDelete","editingId","setEditingId","React","editingName","setEditingName","handleDoubleClick","mesh","handleNameSubmit","id","isSelected","isActive","VectorInput","label","value","onChange","step","handleChange","axis","val","num","SliderInput","min","max","ColorInput","color","hexColor","handleHexChange","hex","r","g","PropertiesPanel","selectedMesh","onUpdateTransform","onUpdateMaterial","expandedSections","setExpandedSections","toggleSection","section","prev","position","rotation","scale","ambient","diffuse","specular","shininess","opacity","transformPoint","p","result","cosX","sinX","cosY","sinY","cosZ","sinZ","SelectionRenderer","mode","isEditMode","faceHighlights","outlineVertices","meshId","bbox","idx","tv","v0","v1","tv0","tv1","faceIdx","face","vertIdx","transform","minX","minY","minZ","maxX","maxY","maxZ","out","AXIS_COLORS","GizmoRenderer","state","cameraDistance","size","activeAxis","colors","pos","axes","dir","tip","arrowSize","perp1","planeSize","planeOffset","xyColor","xzColor","yzColor","xColor","a1","a2","yColor","zColor","boxSize","offsets","pa","pb","uniformColor","centerSize","centerEdges","centerOffsets","ray","threshold","closestAxis","closestDist","dist","rayOrigin","rayDir","lineStart","lineEnd","w0","denom","sc","tc","point1","point2","dx","dy","dz","GridRenderer","divisions","half","isCenter","LINE_VERTEX_SHADER","LINE_FRAGMENT_SHADER","ModelEngine","canvas","WebGL3DEngine","gl","vs","fs","scene","m","s","updates","source","newMesh","addToSelection","cy","count","callback","dt","selectionMode","camera","viewProjection","gridData","axesData","selectionData","outlineColors","vertexColors","edgeColors","gizmoData","zAxis","xAxis","yAxis","view","aspect","proj","f","rangeInv","engineMesh","visible","vec3Sub","vec3Add","vec3Scale","vec3Dot","vec3Cross","vec3Normalize","getRayFromMouse","mouseX","mouseY","ndcX","ndcY","origin","forward","right","up","direction","fovScale","orthoWidth","orthoHeight","rayTriangleIntersect","v2","edge1","edge2","h","q","point","raycastMesh","closestHit","i0","i1","i2","tv2","raycast","hit","Viewport","engine","onEngineReady","canvasRef","useRef","containerRef","engineRef","cameraState","setCameraState","isDraggingRef","isPanningRef","lastMouseRef","useEffect","container","rect","modelEngine","resizeObserver","entries","entry","distance","target","clampedPhi","intervalId","handlePointerDown","useCallback","handlePointerMove","panSpeed","handlePointerUp","handleWheel","delta","ViewportOverlay","cameraRotation","axisLength","StatusBar","fps","triangles","totalVertices","sum","totalFaces","ZModelApp","className","setEngine","setMeshes","setSelection","setTool","setEditMode","setSelectionMode","setShadingMode","setSnapToGrid","_gridSize","_setGridSize","showOutliner","setShowOutliner","showProperties","setShowProperties","setFps","setTriangles","history","setHistory","historyIndex","setHistoryIndex","_setCameraRotation","handleEngineReady","newEngine","cube","syncMeshes","handleSelect","handleAddPrimitive","addCommand","handleDelete","toDelete","deletedMeshes","handleDuplicate","duplicates","dup","handleToggleVisibility","handleToggleLock","handleRename","handleDeleteFromOutliner","handleUpdateTransform","handleUpdateMaterial","command","newHistory","handleUndo","handleRedo","handleKeyDown","allIds","ZModelIcon","index_default"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Primitive Geometry Factory\n *\n * Creates editable mesh primitives with proper topology for editing.\n */\n\nimport type { Vec3, EditableGeometry, EditableMesh, Edge, Face, Material, Color, CubeOptions, SphereOptions, CylinderOptions, PlaneOptions, TorusOptions, PrimitiveType } from '../types';\n\nlet idCounter = 0;\nfunction generateId(): string {\n  return `mesh-${Date.now().toString(36)}-${(++idCounter).toString(36)}`;\n}\n\nfunction generateGeoId(): string {\n  return `geo-${Date.now().toString(36)}-${(++idCounter).toString(36)}`;\n}\n\nconst DEFAULT_COLOR: Color = { r: 180, g: 180, b: 180, a: 1 };\n\nfunction createDefaultMaterial(name: string = 'Material'): Material {\n  return {\n    id: generateId(),\n    name,\n    color: DEFAULT_COLOR,\n    ambient: 0.3,\n    diffuse: 0.7,\n    specular: 0.5,\n    shininess: 32,\n    opacity: 1,\n    wireframe: false,\n    doubleSided: false,\n  };\n}\n\n// ============================================================================\n// Cube\n// ============================================================================\n\nexport function createCube(options: CubeOptions = {}): EditableMesh {\n  const { width = 1, height = 1, depth = 1 } = options;\n  const hw = width / 2, hh = height / 2, hd = depth / 2;\n\n  const vertices = new Float32Array([\n    // Front face\n    -hw, -hh,  hd,   hw, -hh,  hd,   hw,  hh,  hd,  -hw,  hh,  hd,\n    // Back face\n     hw, -hh, -hd,  -hw, -hh, -hd,  -hw,  hh, -hd,   hw,  hh, -hd,\n    // Top face\n    -hw,  hh,  hd,   hw,  hh,  hd,   hw,  hh, -hd,  -hw,  hh, -hd,\n    // Bottom face\n    -hw, -hh, -hd,   hw, -hh, -hd,   hw, -hh,  hd,  -hw, -hh,  hd,\n    // Right face\n     hw, -hh,  hd,   hw, -hh, -hd,   hw,  hh, -hd,   hw,  hh,  hd,\n    // Left face\n    -hw, -hh, -hd,  -hw, -hh,  hd,  -hw,  hh,  hd,  -hw,  hh, -hd,\n  ]);\n\n  const normals = new Float32Array([\n    0, 0, 1,  0, 0, 1,  0, 0, 1,  0, 0, 1,\n    0, 0,-1,  0, 0,-1,  0, 0,-1,  0, 0,-1,\n    0, 1, 0,  0, 1, 0,  0, 1, 0,  0, 1, 0,\n    0,-1, 0,  0,-1, 0,  0,-1, 0,  0,-1, 0,\n    1, 0, 0,  1, 0, 0,  1, 0, 0,  1, 0, 0,\n   -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0,\n  ]);\n\n  const uvs = new Float32Array([\n    0, 0, 1, 0, 1, 1, 0, 1,\n    0, 0, 1, 0, 1, 1, 0, 1,\n    0, 0, 1, 0, 1, 1, 0, 1,\n    0, 0, 1, 0, 1, 1, 0, 1,\n    0, 0, 1, 0, 1, 1, 0, 1,\n    0, 0, 1, 0, 1, 1, 0, 1,\n  ]);\n\n  const indices = new Uint16Array([\n     0,  1,  2,  0,  2,  3,\n     4,  5,  6,  4,  6,  7,\n     8,  9, 10,  8, 10, 11,\n    12, 13, 14, 12, 14, 15,\n    16, 17, 18, 16, 18, 19,\n    20, 21, 22, 20, 22, 23,\n  ]);\n\n  // Build edges and faces for edit mode\n  const edges: Edge[] = [];\n  const faces: Face[] = [];\n\n  for (let i = 0; i < 6; i++) {\n    const base = i * 4;\n    // Quad edges\n    edges.push({ a: base, b: base + 1 });\n    edges.push({ a: base + 1, b: base + 2 });\n    edges.push({ a: base + 2, b: base + 3 });\n    edges.push({ a: base + 3, b: base });\n\n    // Face (as quad)\n    const normal: Vec3 = {\n      x: normals[base * 3],\n      y: normals[base * 3 + 1],\n      z: normals[base * 3 + 2],\n    };\n    faces.push({ vertices: [base, base + 1, base + 2, base + 3], normal });\n  }\n\n  const geometry: EditableGeometry = {\n    id: generateGeoId(),\n    vertices,\n    normals,\n    uvs,\n    indices,\n    vertexCount: 24,\n    edges,\n    faces,\n  };\n\n  return {\n    id: generateId(),\n    name: 'Cube',\n    geometry,\n    material: createDefaultMaterial(),\n    transform: {\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0, z: 0 },\n      scale: { x: 1, y: 1, z: 1 },\n    },\n    visible: true,\n    locked: false,\n    parentId: null,\n  };\n}\n\n// ============================================================================\n// Sphere\n// ============================================================================\n\nexport function createSphere(options: SphereOptions = {}): EditableMesh {\n  const { radius = 0.5, segments = 16, rings = 12 } = options;\n\n  const vertices: number[] = [];\n  const normals: number[] = [];\n  const uvs: number[] = [];\n  const indices: number[] = [];\n\n  for (let iy = 0; iy <= rings; iy++) {\n    const v = iy / rings;\n    const phi = v * Math.PI;\n\n    for (let ix = 0; ix <= segments; ix++) {\n      const u = ix / segments;\n      const theta = u * Math.PI * 2;\n\n      const x = -radius * Math.cos(theta) * Math.sin(phi);\n      const y = radius * Math.cos(phi);\n      const z = radius * Math.sin(theta) * Math.sin(phi);\n\n      vertices.push(x, y, z);\n      normals.push(x / radius, y / radius, z / radius);\n      uvs.push(u, 1 - v);\n    }\n  }\n\n  for (let iy = 0; iy < rings; iy++) {\n    for (let ix = 0; ix < segments; ix++) {\n      const a = ix + (segments + 1) * iy;\n      const b = ix + (segments + 1) * (iy + 1);\n      const c = ix + 1 + (segments + 1) * (iy + 1);\n      const d = ix + 1 + (segments + 1) * iy;\n\n      if (iy !== 0) indices.push(a, b, d);\n      if (iy !== rings - 1) indices.push(b, c, d);\n    }\n  }\n\n  // Build edges\n  const edges: Edge[] = [];\n  const edgeSet = new Set<string>();\n  for (let i = 0; i < indices.length; i += 3) {\n    const tri = [indices[i], indices[i + 1], indices[i + 2]];\n    for (let j = 0; j < 3; j++) {\n      const a = Math.min(tri[j], tri[(j + 1) % 3]);\n      const b = Math.max(tri[j], tri[(j + 1) % 3]);\n      const key = `${a}-${b}`;\n      if (!edgeSet.has(key)) {\n        edgeSet.add(key);\n        edges.push({ a, b });\n      }\n    }\n  }\n\n  // Build faces (triangles)\n  const faces: Face[] = [];\n  for (let i = 0; i < indices.length; i += 3) {\n    const verts = [indices[i], indices[i + 1], indices[i + 2]];\n    const normal: Vec3 = {\n      x: normals[indices[i] * 3],\n      y: normals[indices[i] * 3 + 1],\n      z: normals[indices[i] * 3 + 2],\n    };\n    faces.push({ vertices: verts, normal });\n  }\n\n  const geometry: EditableGeometry = {\n    id: generateGeoId(),\n    vertices: new Float32Array(vertices),\n    normals: new Float32Array(normals),\n    uvs: new Float32Array(uvs),\n    indices: new Uint16Array(indices),\n    vertexCount: vertices.length / 3,\n    edges,\n    faces,\n  };\n\n  return {\n    id: generateId(),\n    name: 'Sphere',\n    geometry,\n    material: createDefaultMaterial(),\n    transform: {\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0, z: 0 },\n      scale: { x: 1, y: 1, z: 1 },\n    },\n    visible: true,\n    locked: false,\n    parentId: null,\n  };\n}\n\n// ============================================================================\n// Cylinder\n// ============================================================================\n\nexport function createCylinder(options: CylinderOptions = {}): EditableMesh {\n  const { radiusTop = 0.5, radiusBottom = 0.5, height = 1, segments = 32 } = options;\n\n  const vertices: number[] = [];\n  const normals: number[] = [];\n  const uvs: number[] = [];\n  const indices: number[] = [];\n  const halfHeight = height / 2;\n\n  // Side vertices\n  for (let i = 0; i <= segments; i++) {\n    const u = i / segments;\n    const theta = u * Math.PI * 2;\n    const cos = Math.cos(theta);\n    const sin = Math.sin(theta);\n\n    vertices.push(cos * radiusTop, halfHeight, sin * radiusTop);\n    normals.push(cos, 0, sin);\n    uvs.push(u, 0);\n\n    vertices.push(cos * radiusBottom, -halfHeight, sin * radiusBottom);\n    normals.push(cos, 0, sin);\n    uvs.push(u, 1);\n  }\n\n  // Side indices\n  for (let i = 0; i < segments; i++) {\n    const a = i * 2;\n    const b = i * 2 + 1;\n    const c = (i + 1) * 2 + 1;\n    const d = (i + 1) * 2;\n    indices.push(a, b, d, b, c, d);\n  }\n\n  // Top cap\n  const topCenterIdx = vertices.length / 3;\n  vertices.push(0, halfHeight, 0);\n  normals.push(0, 1, 0);\n  uvs.push(0.5, 0.5);\n\n  for (let i = 0; i <= segments; i++) {\n    const theta = (i / segments) * Math.PI * 2;\n    vertices.push(Math.cos(theta) * radiusTop, halfHeight, Math.sin(theta) * radiusTop);\n    normals.push(0, 1, 0);\n    uvs.push(Math.cos(theta) * 0.5 + 0.5, Math.sin(theta) * 0.5 + 0.5);\n  }\n\n  for (let i = 0; i < segments; i++) {\n    indices.push(topCenterIdx, topCenterIdx + i + 1, topCenterIdx + i + 2);\n  }\n\n  // Bottom cap\n  const bottomCenterIdx = vertices.length / 3;\n  vertices.push(0, -halfHeight, 0);\n  normals.push(0, -1, 0);\n  uvs.push(0.5, 0.5);\n\n  for (let i = 0; i <= segments; i++) {\n    const theta = (i / segments) * Math.PI * 2;\n    vertices.push(Math.cos(theta) * radiusBottom, -halfHeight, Math.sin(theta) * radiusBottom);\n    normals.push(0, -1, 0);\n    uvs.push(Math.cos(theta) * 0.5 + 0.5, Math.sin(theta) * 0.5 + 0.5);\n  }\n\n  for (let i = 0; i < segments; i++) {\n    indices.push(bottomCenterIdx, bottomCenterIdx + i + 2, bottomCenterIdx + i + 1);\n  }\n\n  // Build edges\n  const edges: Edge[] = [];\n  const edgeSet = new Set<string>();\n  for (let i = 0; i < indices.length; i += 3) {\n    const tri = [indices[i], indices[i + 1], indices[i + 2]];\n    for (let j = 0; j < 3; j++) {\n      const a = Math.min(tri[j], tri[(j + 1) % 3]);\n      const b = Math.max(tri[j], tri[(j + 1) % 3]);\n      const key = `${a}-${b}`;\n      if (!edgeSet.has(key)) {\n        edgeSet.add(key);\n        edges.push({ a, b });\n      }\n    }\n  }\n\n  // Build faces\n  const faces: Face[] = [];\n  for (let i = 0; i < indices.length; i += 3) {\n    const verts = [indices[i], indices[i + 1], indices[i + 2]];\n    const normal: Vec3 = {\n      x: normals[indices[i] * 3],\n      y: normals[indices[i] * 3 + 1],\n      z: normals[indices[i] * 3 + 2],\n    };\n    faces.push({ vertices: verts, normal });\n  }\n\n  const geometry: EditableGeometry = {\n    id: generateGeoId(),\n    vertices: new Float32Array(vertices),\n    normals: new Float32Array(normals),\n    uvs: new Float32Array(uvs),\n    indices: new Uint16Array(indices),\n    vertexCount: vertices.length / 3,\n    edges,\n    faces,\n  };\n\n  return {\n    id: generateId(),\n    name: 'Cylinder',\n    geometry,\n    material: createDefaultMaterial(),\n    transform: {\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0, z: 0 },\n      scale: { x: 1, y: 1, z: 1 },\n    },\n    visible: true,\n    locked: false,\n    parentId: null,\n  };\n}\n\n// ============================================================================\n// Plane\n// ============================================================================\n\nexport function createPlane(options: PlaneOptions = {}): EditableMesh {\n  const { width = 2, height = 2, widthSegments = 1, heightSegments = 1 } = options;\n  const hw = width / 2;\n  const hh = height / 2;\n  const gridX = widthSegments;\n  const gridY = heightSegments;\n\n  const vertices: number[] = [];\n  const normals: number[] = [];\n  const uvs: number[] = [];\n  const indices: number[] = [];\n\n  for (let iy = 0; iy <= gridY; iy++) {\n    const y = iy / gridY;\n    for (let ix = 0; ix <= gridX; ix++) {\n      const x = ix / gridX;\n      vertices.push(x * width - hw, 0, y * height - hh);\n      normals.push(0, 1, 0);\n      uvs.push(x, 1 - y);\n    }\n  }\n\n  for (let iy = 0; iy < gridY; iy++) {\n    for (let ix = 0; ix < gridX; ix++) {\n      const a = ix + (gridX + 1) * iy;\n      const b = ix + (gridX + 1) * (iy + 1);\n      const c = ix + 1 + (gridX + 1) * (iy + 1);\n      const d = ix + 1 + (gridX + 1) * iy;\n      indices.push(a, b, d, b, c, d);\n    }\n  }\n\n  // Build edges\n  const edges: Edge[] = [];\n  const edgeSet = new Set<string>();\n  for (let i = 0; i < indices.length; i += 3) {\n    const tri = [indices[i], indices[i + 1], indices[i + 2]];\n    for (let j = 0; j < 3; j++) {\n      const a = Math.min(tri[j], tri[(j + 1) % 3]);\n      const b = Math.max(tri[j], tri[(j + 1) % 3]);\n      const key = `${a}-${b}`;\n      if (!edgeSet.has(key)) {\n        edgeSet.add(key);\n        edges.push({ a, b });\n      }\n    }\n  }\n\n  // Build faces\n  const faces: Face[] = [];\n  for (let i = 0; i < indices.length; i += 3) {\n    const verts = [indices[i], indices[i + 1], indices[i + 2]];\n    faces.push({ vertices: verts, normal: { x: 0, y: 1, z: 0 } });\n  }\n\n  const geometry: EditableGeometry = {\n    id: generateGeoId(),\n    vertices: new Float32Array(vertices),\n    normals: new Float32Array(normals),\n    uvs: new Float32Array(uvs),\n    indices: new Uint16Array(indices),\n    vertexCount: vertices.length / 3,\n    edges,\n    faces,\n  };\n\n  return {\n    id: generateId(),\n    name: 'Plane',\n    geometry,\n    material: createDefaultMaterial(),\n    transform: {\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0, z: 0 },\n      scale: { x: 1, y: 1, z: 1 },\n    },\n    visible: true,\n    locked: false,\n    parentId: null,\n  };\n}\n\n// ============================================================================\n// Torus\n// ============================================================================\n\nexport function createTorus(options: TorusOptions = {}): EditableMesh {\n  const { radius = 0.5, tube = 0.2, radialSegments = 16, tubularSegments = 32 } = options;\n\n  const vertices: number[] = [];\n  const normals: number[] = [];\n  const uvs: number[] = [];\n  const indices: number[] = [];\n\n  for (let j = 0; j <= radialSegments; j++) {\n    for (let i = 0; i <= tubularSegments; i++) {\n      const u = (i / tubularSegments) * Math.PI * 2;\n      const v = (j / radialSegments) * Math.PI * 2;\n\n      const x = (radius + tube * Math.cos(v)) * Math.cos(u);\n      const y = tube * Math.sin(v);\n      const z = (radius + tube * Math.cos(v)) * Math.sin(u);\n\n      vertices.push(x, y, z);\n\n      const cx = radius * Math.cos(u);\n      const cz = radius * Math.sin(u);\n      const nx = x - cx;\n      const ny = y;\n      const nz = z - cz;\n      const len = Math.sqrt(nx * nx + ny * ny + nz * nz);\n      normals.push(nx / len, ny / len, nz / len);\n\n      uvs.push(i / tubularSegments, j / radialSegments);\n    }\n  }\n\n  for (let j = 0; j < radialSegments; j++) {\n    for (let i = 0; i < tubularSegments; i++) {\n      const a = (tubularSegments + 1) * j + i;\n      const b = (tubularSegments + 1) * (j + 1) + i;\n      const c = (tubularSegments + 1) * (j + 1) + i + 1;\n      const d = (tubularSegments + 1) * j + i + 1;\n      indices.push(a, b, d, b, c, d);\n    }\n  }\n\n  // Build edges\n  const edges: Edge[] = [];\n  const edgeSet = new Set<string>();\n  for (let i = 0; i < indices.length; i += 3) {\n    const tri = [indices[i], indices[i + 1], indices[i + 2]];\n    for (let j = 0; j < 3; j++) {\n      const a = Math.min(tri[j], tri[(j + 1) % 3]);\n      const b = Math.max(tri[j], tri[(j + 1) % 3]);\n      const key = `${a}-${b}`;\n      if (!edgeSet.has(key)) {\n        edgeSet.add(key);\n        edges.push({ a, b });\n      }\n    }\n  }\n\n  // Build faces\n  const faces: Face[] = [];\n  for (let i = 0; i < indices.length; i += 3) {\n    const verts = [indices[i], indices[i + 1], indices[i + 2]];\n    const normal: Vec3 = {\n      x: normals[indices[i] * 3],\n      y: normals[indices[i] * 3 + 1],\n      z: normals[indices[i] * 3 + 2],\n    };\n    faces.push({ vertices: verts, normal });\n  }\n\n  const geometry: EditableGeometry = {\n    id: generateGeoId(),\n    vertices: new Float32Array(vertices),\n    normals: new Float32Array(normals),\n    uvs: new Float32Array(uvs),\n    indices: new Uint16Array(indices),\n    vertexCount: vertices.length / 3,\n    edges,\n    faces,\n  };\n\n  return {\n    id: generateId(),\n    name: 'Torus',\n    geometry,\n    material: createDefaultMaterial(),\n    transform: {\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0, z: 0 },\n      scale: { x: 1, y: 1, z: 1 },\n    },\n    visible: true,\n    locked: false,\n    parentId: null,\n  };\n}\n\n// ============================================================================\n// Cone\n// ============================================================================\n\nexport function createCone(options: CylinderOptions = {}): EditableMesh {\n  const { radiusBottom = 0.5, height = 1, segments = 32 } = options;\n  return createCylinder({ radiusTop: 0, radiusBottom, height, segments });\n}\n\n// ============================================================================\n// Factory\n// ============================================================================\n\nexport interface PrimitiveFactory {\n  cube: (options?: CubeOptions) => EditableMesh;\n  sphere: (options?: SphereOptions) => EditableMesh;\n  cylinder: (options?: CylinderOptions) => EditableMesh;\n  plane: (options?: PlaneOptions) => EditableMesh;\n  torus: (options?: TorusOptions) => EditableMesh;\n  cone: (options?: CylinderOptions) => EditableMesh;\n}\n\nexport function createPrimitive(type: PrimitiveType, options?: Record<string, unknown>): EditableMesh {\n  switch (type) {\n    case 'cube':\n      return createCube(options as CubeOptions);\n    case 'sphere':\n      return createSphere(options as SphereOptions);\n    case 'cylinder':\n      return createCylinder(options as CylinderOptions);\n    case 'plane':\n      return createPlane(options as PlaneOptions);\n    case 'torus':\n      return createTorus(options as TorusOptions);\n    case 'cone':\n      return createCone(options as CylinderOptions);\n    case 'icosphere':\n      return createSphere({ ...(options as SphereOptions), segments: 8, rings: 4 });\n    default:\n      return createCube();\n  }\n}\n","/**\n * Toolbar Component\n *\n * Top toolbar with transform tools and add menu.\n */\n\nimport React, { useState } from 'react';\nimport type { TransformTool, EditMode, ShadingMode, PrimitiveType } from '../types';\n\nexport interface ToolbarProps {\n  tool: TransformTool;\n  editMode: EditMode;\n  shadingMode: ShadingMode;\n  snapToGrid: boolean;\n  onToolChange: (tool: TransformTool) => void;\n  onEditModeChange: (mode: EditMode) => void;\n  onShadingModeChange: (mode: ShadingMode) => void;\n  onSnapToGridChange: (enabled: boolean) => void;\n  onAddPrimitive: (type: PrimitiveType) => void;\n  onUndo: () => void;\n  onRedo: () => void;\n  canUndo: boolean;\n  canRedo: boolean;\n}\n\nconst TOOLS: { id: TransformTool; label: string; shortcut: string }[] = [\n  { id: 'select', label: 'Select', shortcut: 'Q' },\n  { id: 'move', label: 'Move', shortcut: 'G' },\n  { id: 'rotate', label: 'Rotate', shortcut: 'R' },\n  { id: 'scale', label: 'Scale', shortcut: 'S' },\n];\n\nconst PRIMITIVES: { type: PrimitiveType; label: string }[] = [\n  { type: 'cube', label: 'Cube' },\n  { type: 'sphere', label: 'Sphere' },\n  { type: 'cylinder', label: 'Cylinder' },\n  { type: 'cone', label: 'Cone' },\n  { type: 'plane', label: 'Plane' },\n  { type: 'torus', label: 'Torus' },\n];\n\nexport function Toolbar({\n  tool,\n  editMode,\n  shadingMode,\n  snapToGrid,\n  onToolChange,\n  onEditModeChange,\n  onShadingModeChange,\n  onSnapToGridChange,\n  onAddPrimitive,\n  onUndo,\n  onRedo,\n  canUndo,\n  canRedo,\n}: ToolbarProps): React.ReactElement {\n  const [showAddMenu, setShowAddMenu] = useState(false);\n\n  return (\n    <div className=\"flex items-center gap-1 px-2 py-1 bg-black/40 border-b border-white/10\">\n      {/* Undo/Redo */}\n      <div className=\"flex items-center gap-0.5 mr-2\">\n        <button\n          onClick={onUndo}\n          disabled={!canUndo}\n          className=\"p-1.5 rounded hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed\"\n          title=\"Undo (Ctrl+Z)\"\n        >\n          <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M3 10h10a5 5 0 0 1 5 5v2M3 10l4 4M3 10l4-4\" />\n          </svg>\n        </button>\n        <button\n          onClick={onRedo}\n          disabled={!canRedo}\n          className=\"p-1.5 rounded hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed\"\n          title=\"Redo (Ctrl+Shift+Z)\"\n        >\n          <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M21 10H11a5 5 0 0 0-5 5v2M21 10l-4 4M21 10l-4-4\" />\n          </svg>\n        </button>\n      </div>\n\n      {/* Divider */}\n      <div className=\"w-px h-5 bg-white/20 mx-1\" />\n\n      {/* Transform Tools */}\n      <div className=\"flex items-center gap-0.5\">\n        {TOOLS.map((t) => (\n          <button\n            key={t.id}\n            onClick={() => onToolChange(t.id)}\n            className={`px-2 py-1 text-xs rounded transition-colors ${\n              tool === t.id\n                ? 'bg-blue-500/80 text-white'\n                : 'hover:bg-white/10 text-white/70'\n            }`}\n            title={`${t.label} (${t.shortcut})`}\n          >\n            {t.label}\n          </button>\n        ))}\n      </div>\n\n      {/* Divider */}\n      <div className=\"w-px h-5 bg-white/20 mx-1\" />\n\n      {/* Edit Mode Toggle */}\n      <button\n        onClick={() => onEditModeChange(editMode === 'object' ? 'edit' : 'object')}\n        className={`px-2 py-1 text-xs rounded transition-colors ${\n          editMode === 'edit'\n            ? 'bg-orange-500/80 text-white'\n            : 'hover:bg-white/10 text-white/70'\n        }`}\n        title=\"Toggle Edit Mode (Tab)\"\n      >\n        {editMode === 'object' ? 'Object Mode' : 'Edit Mode'}\n      </button>\n\n      {/* Divider */}\n      <div className=\"w-px h-5 bg-white/20 mx-1\" />\n\n      {/* Add Primitive */}\n      <div className=\"relative\">\n        <button\n          onClick={() => setShowAddMenu(!showAddMenu)}\n          className=\"px-2 py-1 text-xs rounded hover:bg-white/10 text-white/70 flex items-center gap-1\"\n        >\n          <svg className=\"w-3 h-3\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M12 5v14M5 12h14\" />\n          </svg>\n          Add\n          <svg className=\"w-3 h-3\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M6 9l6 6 6-6\" />\n          </svg>\n        </button>\n\n        {showAddMenu && (\n          <>\n            <div\n              className=\"fixed inset-0 z-40\"\n              onClick={() => setShowAddMenu(false)}\n            />\n            <div className=\"absolute top-full left-0 mt-1 py-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-50 min-w-32\">\n              <div className=\"px-2 py-1 text-xs text-white/50 uppercase tracking-wider\">\n                Mesh\n              </div>\n              {PRIMITIVES.map((p) => (\n                <button\n                  key={p.type}\n                  onClick={() => {\n                    onAddPrimitive(p.type);\n                    setShowAddMenu(false);\n                  }}\n                  className=\"w-full px-3 py-1.5 text-left text-sm hover:bg-white/10 text-white/80\"\n                >\n                  {p.label}\n                </button>\n              ))}\n            </div>\n          </>\n        )}\n      </div>\n\n      {/* Spacer */}\n      <div className=\"flex-1\" />\n\n      {/* Shading Mode */}\n      <select\n        value={shadingMode}\n        onChange={(e) => onShadingModeChange(e.target.value as ShadingMode)}\n        className=\"px-2 py-1 text-xs bg-transparent border border-white/20 rounded text-white/70\"\n      >\n        <option value=\"solid\">Solid</option>\n        <option value=\"wireframe\">Wireframe</option>\n        <option value=\"material\">Material</option>\n      </select>\n\n      {/* Snap to Grid */}\n      <label className=\"flex items-center gap-1.5 px-2 text-xs text-white/70 cursor-pointer\">\n        <input\n          type=\"checkbox\"\n          checked={snapToGrid}\n          onChange={(e) => onSnapToGridChange(e.target.checked)}\n          className=\"w-3 h-3\"\n        />\n        Snap\n      </label>\n    </div>\n  );\n}\n","/**\n * Outliner Component\n *\n * Scene hierarchy view with object visibility and selection.\n */\n\nimport React from 'react';\nimport type { EditableMesh, SelectionState } from '../types';\n\nexport interface OutlinerProps {\n  meshes: EditableMesh[];\n  selection: SelectionState;\n  onSelect: (id: string, addToSelection: boolean) => void;\n  onToggleVisibility: (id: string) => void;\n  onToggleLock: (id: string) => void;\n  onRename: (id: string, name: string) => void;\n  onDelete: (id: string) => void;\n}\n\nexport function Outliner({\n  meshes,\n  selection,\n  onSelect,\n  onToggleVisibility,\n  onToggleLock,\n  onRename,\n  onDelete,\n}: OutlinerProps): React.ReactElement {\n  const [editingId, setEditingId] = React.useState<string | null>(null);\n  const [editingName, setEditingName] = React.useState('');\n\n  const handleDoubleClick = (mesh: EditableMesh) => {\n    setEditingId(mesh.id);\n    setEditingName(mesh.name);\n  };\n\n  const handleNameSubmit = (id: string) => {\n    if (editingName.trim()) {\n      onRename(id, editingName.trim());\n    }\n    setEditingId(null);\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-black/30\">\n      <div className=\"px-3 py-2 border-b border-white/10 text-xs font-medium text-white/60 uppercase tracking-wider\">\n        Outliner\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto\">\n        {/* Scene Root */}\n        <div className=\"px-2 py-1.5 text-sm text-white/50 flex items-center gap-2\">\n          <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\" />\n            <path d=\"M12 2a10 10 0 0 1 0 20\" />\n          </svg>\n          Scene\n        </div>\n\n        {/* Objects */}\n        <div className=\"pl-2\">\n          {meshes.length === 0 ? (\n            <div className=\"px-4 py-8 text-center text-white/30 text-xs\">\n              No objects in scene.\n              <br />\n              Press Shift+A to add.\n            </div>\n          ) : (\n            meshes.map((mesh) => {\n              const isSelected = selection.selectedObjects.includes(mesh.id);\n              const isActive = selection.activeObject === mesh.id;\n\n              return (\n                <div\n                  key={mesh.id}\n                  onClick={(e) => onSelect(mesh.id, e.shiftKey)}\n                  onDoubleClick={() => handleDoubleClick(mesh)}\n                  className={`group flex items-center gap-1 px-2 py-1 cursor-pointer rounded-sm mx-1 ${\n                    isActive\n                      ? 'bg-blue-500/50'\n                      : isSelected\n                      ? 'bg-blue-500/30'\n                      : 'hover:bg-white/5'\n                  }`}\n                >\n                  {/* Icon */}\n                  <div className=\"w-4 h-4 flex items-center justify-center text-white/40\">\n                    <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" className=\"w-3.5 h-3.5\">\n                      <path d=\"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\" />\n                    </svg>\n                  </div>\n\n                  {/* Name */}\n                  {editingId === mesh.id ? (\n                    <input\n                      type=\"text\"\n                      value={editingName}\n                      onChange={(e) => setEditingName(e.target.value)}\n                      onBlur={() => handleNameSubmit(mesh.id)}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter') handleNameSubmit(mesh.id);\n                        if (e.key === 'Escape') setEditingId(null);\n                      }}\n                      className=\"flex-1 px-1 py-0 text-sm bg-black/50 border border-blue-500 rounded outline-none\"\n                      autoFocus\n                      onClick={(e) => e.stopPropagation()}\n                    />\n                  ) : (\n                    <span\n                      className={`flex-1 text-sm truncate ${\n                        mesh.visible ? 'text-white/80' : 'text-white/30'\n                      }`}\n                    >\n                      {mesh.name}\n                    </span>\n                  )}\n\n                  {/* Controls */}\n                  <div className=\"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {/* Visibility */}\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onToggleVisibility(mesh.id);\n                      }}\n                      className={`p-0.5 rounded hover:bg-white/10 ${\n                        mesh.visible ? 'text-white/50' : 'text-white/20'\n                      }`}\n                      title={mesh.visible ? 'Hide' : 'Show'}\n                    >\n                      {mesh.visible ? (\n                        <svg className=\"w-3.5 h-3.5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                          <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\" />\n                          <circle cx=\"12\" cy=\"12\" r=\"3\" />\n                        </svg>\n                      ) : (\n                        <svg className=\"w-3.5 h-3.5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                          <path d=\"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24\" />\n                          <line x1=\"1\" y1=\"1\" x2=\"23\" y2=\"23\" />\n                        </svg>\n                      )}\n                    </button>\n\n                    {/* Lock */}\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onToggleLock(mesh.id);\n                      }}\n                      className={`p-0.5 rounded hover:bg-white/10 ${\n                        mesh.locked ? 'text-orange-400' : 'text-white/30'\n                      }`}\n                      title={mesh.locked ? 'Unlock' : 'Lock'}\n                    >\n                      {mesh.locked ? (\n                        <svg className=\"w-3.5 h-3.5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                          <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\" />\n                          <path d=\"M7 11V7a5 5 0 0 1 10 0v4\" />\n                        </svg>\n                      ) : (\n                        <svg className=\"w-3.5 h-3.5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                          <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\" />\n                          <path d=\"M7 11V7a5 5 0 0 1 9.9-1\" />\n                        </svg>\n                      )}\n                    </button>\n\n                    {/* Delete */}\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onDelete(mesh.id);\n                      }}\n                      className=\"p-0.5 rounded hover:bg-red-500/30 text-white/30 hover:text-red-400\"\n                      title=\"Delete\"\n                    >\n                      <svg className=\"w-3.5 h-3.5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <polyline points=\"3 6 5 6 21 6\" />\n                        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              );\n            })\n          )}\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div className=\"px-3 py-1.5 border-t border-white/10 text-xs text-white/40\">\n        {meshes.length} object{meshes.length !== 1 ? 's' : ''}\n        {selection.selectedObjects.length > 0 && (\n          <span> | {selection.selectedObjects.length} selected</span>\n        )}\n      </div>\n    </div>\n  );\n}\n","/**\n * Properties Panel Component\n *\n * Shows transform and material properties for selected objects.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport type { EditableMesh, Vec3, Color } from '../types';\n\nexport interface PropertiesPanelProps {\n  selectedMesh: EditableMesh | null;\n  onUpdateTransform: (updates: Partial<{ position: Vec3; rotation: Vec3; scale: Vec3 }>) => void;\n  onUpdateMaterial: (updates: Partial<{ color: Color; ambient: number; diffuse: number; specular: number; shininess: number; opacity: number }>) => void;\n}\n\ninterface VectorInputProps {\n  label: string;\n  value: Vec3;\n  onChange: (value: Vec3) => void;\n  step?: number;\n}\n\nfunction VectorInput({ label, value, onChange, step = 0.1 }: VectorInputProps): React.ReactElement {\n  const handleChange = (axis: 'x' | 'y' | 'z', val: string) => {\n    const num = parseFloat(val);\n    if (!isNaN(num)) {\n      onChange({ ...value, [axis]: num });\n    }\n  };\n\n  return (\n    <div className=\"space-y-1\">\n      <label className=\"text-xs text-white/50 uppercase tracking-wider\">{label}</label>\n      <div className=\"flex gap-1\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-1\">\n            <span className=\"text-xs text-red-400 w-3\">X</span>\n            <input\n              type=\"number\"\n              value={value.x.toFixed(3)}\n              onChange={(e) => handleChange('x', e.target.value)}\n              step={step}\n              className=\"w-full px-2 py-1 text-xs bg-black/30 border border-white/10 rounded focus:border-blue-500 outline-none\"\n            />\n          </div>\n        </div>\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-1\">\n            <span className=\"text-xs text-green-400 w-3\">Y</span>\n            <input\n              type=\"number\"\n              value={value.y.toFixed(3)}\n              onChange={(e) => handleChange('y', e.target.value)}\n              step={step}\n              className=\"w-full px-2 py-1 text-xs bg-black/30 border border-white/10 rounded focus:border-blue-500 outline-none\"\n            />\n          </div>\n        </div>\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-1\">\n            <span className=\"text-xs text-blue-400 w-3\">Z</span>\n            <input\n              type=\"number\"\n              value={value.z.toFixed(3)}\n              onChange={(e) => handleChange('z', e.target.value)}\n              step={step}\n              className=\"w-full px-2 py-1 text-xs bg-black/30 border border-white/10 rounded focus:border-blue-500 outline-none\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\ninterface SliderInputProps {\n  label: string;\n  value: number;\n  onChange: (value: number) => void;\n  min?: number;\n  max?: number;\n  step?: number;\n}\n\nfunction SliderInput({ label, value, onChange, min = 0, max = 1, step = 0.01 }: SliderInputProps): React.ReactElement {\n  return (\n    <div className=\"space-y-1\">\n      <div className=\"flex justify-between\">\n        <label className=\"text-xs text-white/50\">{label}</label>\n        <span className=\"text-xs text-white/70\">{value.toFixed(2)}</span>\n      </div>\n      <input\n        type=\"range\"\n        value={value}\n        onChange={(e) => onChange(parseFloat(e.target.value))}\n        min={min}\n        max={max}\n        step={step}\n        className=\"w-full h-1 bg-white/10 rounded appearance-none cursor-pointer\"\n      />\n    </div>\n  );\n}\n\nfunction ColorInput({ color, onChange }: { color: Color; onChange: (c: Color) => void }): React.ReactElement {\n  const hexColor = `#${Math.round(color.r).toString(16).padStart(2, '0')}${Math.round(color.g).toString(16).padStart(2, '0')}${Math.round(color.b).toString(16).padStart(2, '0')}`;\n\n  const handleHexChange = (hex: string) => {\n    const r = parseInt(hex.slice(1, 3), 16);\n    const g = parseInt(hex.slice(3, 5), 16);\n    const b = parseInt(hex.slice(5, 7), 16);\n    if (!isNaN(r) && !isNaN(g) && !isNaN(b)) {\n      onChange({ r, g, b, a: color.a });\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <input\n        type=\"color\"\n        value={hexColor}\n        onChange={(e) => handleHexChange(e.target.value)}\n        className=\"w-8 h-8 rounded border border-white/20 cursor-pointer\"\n      />\n      <input\n        type=\"text\"\n        value={hexColor}\n        onChange={(e) => handleHexChange(e.target.value)}\n        className=\"flex-1 px-2 py-1 text-xs bg-black/30 border border-white/10 rounded focus:border-blue-500 outline-none\"\n      />\n    </div>\n  );\n}\n\nexport function PropertiesPanel({\n  selectedMesh,\n  onUpdateTransform,\n  onUpdateMaterial,\n}: PropertiesPanelProps): React.ReactElement {\n  const [expandedSections, setExpandedSections] = useState({\n    transform: true,\n    material: true,\n    geometry: false,\n  });\n\n  const toggleSection = (section: keyof typeof expandedSections) => {\n    setExpandedSections((prev) => ({ ...prev, [section]: !prev[section] }));\n  };\n\n  if (!selectedMesh) {\n    return (\n      <div className=\"flex flex-col h-full bg-black/30\">\n        <div className=\"px-3 py-2 border-b border-white/10 text-xs font-medium text-white/60 uppercase tracking-wider\">\n          Properties\n        </div>\n        <div className=\"flex-1 flex items-center justify-center\">\n          <div className=\"text-center text-white/30 text-xs px-4\">\n            No object selected.\n            <br />\n            Select an object to view properties.\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col h-full bg-black/30\">\n      <div className=\"px-3 py-2 border-b border-white/10 text-xs font-medium text-white/60 uppercase tracking-wider\">\n        Properties\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto\">\n        {/* Object Name */}\n        <div className=\"px-3 py-2 border-b border-white/5\">\n          <div className=\"text-sm font-medium text-white/90\">{selectedMesh.name}</div>\n          <div className=\"text-xs text-white/40\">{selectedMesh.geometry.vertexCount} vertices</div>\n        </div>\n\n        {/* Transform Section */}\n        <div className=\"border-b border-white/5\">\n          <button\n            onClick={() => toggleSection('transform')}\n            className=\"w-full px-3 py-2 flex items-center justify-between hover:bg-white/5\"\n          >\n            <span className=\"text-xs font-medium text-white/70\">Transform</span>\n            <svg\n              className={`w-4 h-4 text-white/40 transition-transform ${expandedSections.transform ? 'rotate-180' : ''}`}\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <path d=\"M6 9l6 6 6-6\" />\n            </svg>\n          </button>\n\n          {expandedSections.transform && (\n            <div className=\"px-3 pb-3 space-y-3\">\n              <VectorInput\n                label=\"Position\"\n                value={selectedMesh.transform.position}\n                onChange={(position) => onUpdateTransform({ position })}\n              />\n              <VectorInput\n                label=\"Rotation\"\n                value={{\n                  x: (selectedMesh.transform.rotation.x * 180) / Math.PI,\n                  y: (selectedMesh.transform.rotation.y * 180) / Math.PI,\n                  z: (selectedMesh.transform.rotation.z * 180) / Math.PI,\n                }}\n                onChange={(rotation) =>\n                  onUpdateTransform({\n                    rotation: {\n                      x: (rotation.x * Math.PI) / 180,\n                      y: (rotation.y * Math.PI) / 180,\n                      z: (rotation.z * Math.PI) / 180,\n                    },\n                  })\n                }\n                step={1}\n              />\n              <VectorInput\n                label=\"Scale\"\n                value={selectedMesh.transform.scale}\n                onChange={(scale) => onUpdateTransform({ scale })}\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Material Section */}\n        <div className=\"border-b border-white/5\">\n          <button\n            onClick={() => toggleSection('material')}\n            className=\"w-full px-3 py-2 flex items-center justify-between hover:bg-white/5\"\n          >\n            <span className=\"text-xs font-medium text-white/70\">Material</span>\n            <svg\n              className={`w-4 h-4 text-white/40 transition-transform ${expandedSections.material ? 'rotate-180' : ''}`}\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <path d=\"M6 9l6 6 6-6\" />\n            </svg>\n          </button>\n\n          {expandedSections.material && (\n            <div className=\"px-3 pb-3 space-y-3\">\n              <div className=\"space-y-1\">\n                <label className=\"text-xs text-white/50\">Color</label>\n                <ColorInput\n                  color={selectedMesh.material.color}\n                  onChange={(color) => onUpdateMaterial({ color })}\n                />\n              </div>\n\n              <SliderInput\n                label=\"Ambient\"\n                value={selectedMesh.material.ambient}\n                onChange={(ambient) => onUpdateMaterial({ ambient })}\n              />\n\n              <SliderInput\n                label=\"Diffuse\"\n                value={selectedMesh.material.diffuse}\n                onChange={(diffuse) => onUpdateMaterial({ diffuse })}\n              />\n\n              <SliderInput\n                label=\"Specular\"\n                value={selectedMesh.material.specular}\n                onChange={(specular) => onUpdateMaterial({ specular })}\n              />\n\n              <SliderInput\n                label=\"Shininess\"\n                value={selectedMesh.material.shininess}\n                onChange={(shininess) => onUpdateMaterial({ shininess })}\n                min={1}\n                max={128}\n                step={1}\n              />\n\n              <SliderInput\n                label=\"Opacity\"\n                value={selectedMesh.material.opacity}\n                onChange={(opacity) => onUpdateMaterial({ opacity })}\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Geometry Section */}\n        <div className=\"border-b border-white/5\">\n          <button\n            onClick={() => toggleSection('geometry')}\n            className=\"w-full px-3 py-2 flex items-center justify-between hover:bg-white/5\"\n          >\n            <span className=\"text-xs font-medium text-white/70\">Geometry</span>\n            <svg\n              className={`w-4 h-4 text-white/40 transition-transform ${expandedSections.geometry ? 'rotate-180' : ''}`}\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <path d=\"M6 9l6 6 6-6\" />\n            </svg>\n          </button>\n\n          {expandedSections.geometry && (\n            <div className=\"px-3 pb-3 space-y-2 text-xs\">\n              <div className=\"flex justify-between text-white/60\">\n                <span>Vertices</span>\n                <span className=\"text-white/80\">{selectedMesh.geometry.vertexCount}</span>\n              </div>\n              <div className=\"flex justify-between text-white/60\">\n                <span>Edges</span>\n                <span className=\"text-white/80\">{selectedMesh.geometry.edges.length}</span>\n              </div>\n              <div className=\"flex justify-between text-white/60\">\n                <span>Faces</span>\n                <span className=\"text-white/80\">{selectedMesh.geometry.faces.length}</span>\n              </div>\n              <div className=\"flex justify-between text-white/60\">\n                <span>Triangles</span>\n                <span className=\"text-white/80\">{selectedMesh.geometry.indices.length / 3}</span>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Selection Renderer\n *\n * Renders selection highlights for vertices, edges, faces, and objects.\n */\n\nimport type { Vec3, EditableMesh, SelectionState, SelectionMode, Transform3D } from '../types';\n\n// Transform a point by a transform\nfunction transformPoint(p: Vec3, t: Transform3D): Vec3 {\n  let result = { x: p.x * t.scale.x, y: p.y * t.scale.y, z: p.z * t.scale.z };\n  const { rotation } = t;\n  const cosX = Math.cos(rotation.x), sinX = Math.sin(rotation.x);\n  result = { x: result.x, y: result.y * cosX - result.z * sinX, z: result.y * sinX + result.z * cosX };\n  const cosY = Math.cos(rotation.y), sinY = Math.sin(rotation.y);\n  result = { x: result.x * cosY + result.z * sinY, y: result.y, z: -result.x * sinY + result.z * cosY };\n  const cosZ = Math.cos(rotation.z), sinZ = Math.sin(rotation.z);\n  result = { x: result.x * cosZ - result.y * sinZ, y: result.x * sinZ + result.y * cosZ, z: result.z };\n  return { x: result.x + t.position.x, y: result.y + t.position.y, z: result.z + t.position.z };\n}\n\nexport interface SelectionRenderData {\n  vertices: Float32Array;\n  edges: Float32Array;\n  faceHighlights: Float32Array;\n  outlineVertices: Float32Array;\n}\n\nexport class SelectionRenderer {\n  private meshes: Map<string, EditableMesh> = new Map();\n\n  setMeshes(meshes: EditableMesh[]): void {\n    this.meshes.clear();\n    for (const mesh of meshes) {\n      this.meshes.set(mesh.id, mesh);\n    }\n  }\n\n  /**\n   * Generate render data for selection visualization\n   */\n  generateRenderData(\n    selection: SelectionState,\n    mode: SelectionMode,\n    isEditMode: boolean\n  ): SelectionRenderData {\n    const vertices: number[] = [];\n    const edges: number[] = [];\n    const faceHighlights: number[] = [];\n    const outlineVertices: number[] = [];\n\n    // Object selection outline\n    for (const meshId of selection.selectedObjects) {\n      const mesh = this.meshes.get(meshId);\n      if (!mesh) continue;\n\n      const bbox = this.getBoundingBox(mesh);\n      this.addBoundingBoxLines(bbox, outlineVertices);\n    }\n\n    // Edit mode selections\n    if (isEditMode && selection.activeObject) {\n      const mesh = this.meshes.get(selection.activeObject);\n      if (mesh) {\n        // Vertex selection\n        if (mode === 'vertex') {\n          for (const idx of selection.selectedVertices) {\n            const v: Vec3 = {\n              x: mesh.geometry.vertices[idx * 3],\n              y: mesh.geometry.vertices[idx * 3 + 1],\n              z: mesh.geometry.vertices[idx * 3 + 2],\n            };\n            const tv = transformPoint(v, mesh.transform);\n            vertices.push(tv.x, tv.y, tv.z);\n          }\n        }\n\n        // Edge selection\n        if (mode === 'edge') {\n          for (const [a, b] of selection.selectedEdges) {\n            const v0: Vec3 = {\n              x: mesh.geometry.vertices[a * 3],\n              y: mesh.geometry.vertices[a * 3 + 1],\n              z: mesh.geometry.vertices[a * 3 + 2],\n            };\n            const v1: Vec3 = {\n              x: mesh.geometry.vertices[b * 3],\n              y: mesh.geometry.vertices[b * 3 + 1],\n              z: mesh.geometry.vertices[b * 3 + 2],\n            };\n            const tv0 = transformPoint(v0, mesh.transform);\n            const tv1 = transformPoint(v1, mesh.transform);\n            edges.push(tv0.x, tv0.y, tv0.z, tv1.x, tv1.y, tv1.z);\n          }\n        }\n\n        // Face selection\n        if (mode === 'face') {\n          for (const faceIdx of selection.selectedFaces) {\n            const face = mesh.geometry.faces[faceIdx];\n            if (!face) continue;\n\n            for (const vertIdx of face.vertices) {\n              const v: Vec3 = {\n                x: mesh.geometry.vertices[vertIdx * 3],\n                y: mesh.geometry.vertices[vertIdx * 3 + 1],\n                z: mesh.geometry.vertices[vertIdx * 3 + 2],\n              };\n              const tv = transformPoint(v, mesh.transform);\n              faceHighlights.push(tv.x, tv.y, tv.z);\n            }\n          }\n        }\n      }\n    }\n\n    return {\n      vertices: new Float32Array(vertices),\n      edges: new Float32Array(edges),\n      faceHighlights: new Float32Array(faceHighlights),\n      outlineVertices: new Float32Array(outlineVertices),\n    };\n  }\n\n  private getBoundingBox(mesh: EditableMesh): { min: Vec3; max: Vec3 } {\n    const { vertices } = mesh.geometry;\n    const { transform } = mesh;\n\n    let minX = Infinity, minY = Infinity, minZ = Infinity;\n    let maxX = -Infinity, maxY = -Infinity, maxZ = -Infinity;\n\n    for (let i = 0; i < mesh.geometry.vertexCount; i++) {\n      const v: Vec3 = { x: vertices[i * 3], y: vertices[i * 3 + 1], z: vertices[i * 3 + 2] };\n      const tv = transformPoint(v, transform);\n\n      minX = Math.min(minX, tv.x);\n      minY = Math.min(minY, tv.y);\n      minZ = Math.min(minZ, tv.z);\n      maxX = Math.max(maxX, tv.x);\n      maxY = Math.max(maxY, tv.y);\n      maxZ = Math.max(maxZ, tv.z);\n    }\n\n    return {\n      min: { x: minX, y: minY, z: minZ },\n      max: { x: maxX, y: maxY, z: maxZ },\n    };\n  }\n\n  private addBoundingBoxLines(bbox: { min: Vec3; max: Vec3 }, out: number[]): void {\n    const { min, max } = bbox;\n\n    // Bottom face\n    out.push(min.x, min.y, min.z, max.x, min.y, min.z);\n    out.push(max.x, min.y, min.z, max.x, min.y, max.z);\n    out.push(max.x, min.y, max.z, min.x, min.y, max.z);\n    out.push(min.x, min.y, max.z, min.x, min.y, min.z);\n\n    // Top face\n    out.push(min.x, max.y, min.z, max.x, max.y, min.z);\n    out.push(max.x, max.y, min.z, max.x, max.y, max.z);\n    out.push(max.x, max.y, max.z, min.x, max.y, max.z);\n    out.push(min.x, max.y, max.z, min.x, max.y, min.z);\n\n    // Vertical edges\n    out.push(min.x, min.y, min.z, min.x, max.y, min.z);\n    out.push(max.x, min.y, min.z, max.x, max.y, min.z);\n    out.push(max.x, min.y, max.z, max.x, max.y, max.z);\n    out.push(min.x, min.y, max.z, min.x, max.y, max.z);\n  }\n}\n","/**\n * Gizmo Renderer\n *\n * Renders transform gizmos (move, rotate, scale) for object manipulation.\n */\n\nimport type { Vec3, TransformTool, GizmoState } from '../types';\n\nexport interface GizmoGeometry {\n  vertices: Float32Array;\n  colors: Float32Array;\n  indices: Uint16Array;\n}\n\nconst AXIS_COLORS = {\n  x: { r: 1, g: 0.2, b: 0.2 }, // Red\n  y: { r: 0.2, g: 1, b: 0.2 }, // Green\n  z: { r: 0.2, g: 0.4, b: 1 }, // Blue\n  highlight: { r: 1, g: 1, b: 0.2 }, // Yellow\n};\n\nexport class GizmoRenderer {\n  private moveGizmo: GizmoGeometry | null = null;\n  private rotateGizmo: GizmoGeometry | null = null;\n  private scaleGizmo: GizmoGeometry | null = null;\n\n  /**\n   * Generate line data for the current gizmo\n   */\n  generateGizmoLines(\n    tool: TransformTool,\n    state: GizmoState,\n    cameraDistance: number\n  ): { vertices: number[]; colors: number[] } {\n    if (!state.visible || tool === 'select') {\n      return { vertices: [], colors: [] };\n    }\n\n    const size = Math.max(0.5, cameraDistance * 0.1);\n    const { position, activeAxis } = state;\n    const vertices: number[] = [];\n    const colors: number[] = [];\n\n    switch (tool) {\n      case 'move':\n        this.addMoveGizmo(position, size, activeAxis, vertices, colors);\n        break;\n      case 'rotate':\n        this.addRotateGizmo(position, size, activeAxis, vertices, colors);\n        break;\n      case 'scale':\n        this.addScaleGizmo(position, size, activeAxis, vertices, colors);\n        break;\n    }\n\n    return { vertices, colors };\n  }\n\n  private addMoveGizmo(\n    pos: Vec3,\n    size: number,\n    activeAxis: string | null,\n    vertices: number[],\n    colors: number[]\n  ): void {\n    const axes: Array<{ axis: 'x' | 'y' | 'z'; dir: Vec3 }> = [\n      { axis: 'x', dir: { x: 1, y: 0, z: 0 } },\n      { axis: 'y', dir: { x: 0, y: 1, z: 0 } },\n      { axis: 'z', dir: { x: 0, y: 0, z: 1 } },\n    ];\n\n    for (const { axis, dir } of axes) {\n      const color = activeAxis === axis ? AXIS_COLORS.highlight : AXIS_COLORS[axis];\n\n      // Main axis line\n      vertices.push(pos.x, pos.y, pos.z);\n      vertices.push(pos.x + dir.x * size, pos.y + dir.y * size, pos.z + dir.z * size);\n      colors.push(color.r, color.g, color.b, color.r, color.g, color.b);\n\n      // Arrow head\n      const tip = { x: pos.x + dir.x * size, y: pos.y + dir.y * size, z: pos.z + dir.z * size };\n      const arrowSize = size * 0.15;\n\n      // Create perpendicular vectors for arrow\n      const perp1 = axis === 'y' ? { x: 1, y: 0, z: 0 } : { x: 0, y: 1, z: 0 };\n      const perp2 = axis === 'z' ? { x: 1, y: 0, z: 0 } : { x: 0, y: 0, z: 1 };\n\n      // Arrow lines\n      vertices.push(tip.x, tip.y, tip.z);\n      vertices.push(\n        tip.x - dir.x * arrowSize + perp1.x * arrowSize * 0.3,\n        tip.y - dir.y * arrowSize + perp1.y * arrowSize * 0.3,\n        tip.z - dir.z * arrowSize + perp1.z * arrowSize * 0.3\n      );\n      colors.push(color.r, color.g, color.b, color.r, color.g, color.b);\n\n      vertices.push(tip.x, tip.y, tip.z);\n      vertices.push(\n        tip.x - dir.x * arrowSize - perp1.x * arrowSize * 0.3,\n        tip.y - dir.y * arrowSize - perp1.y * arrowSize * 0.3,\n        tip.z - dir.z * arrowSize - perp1.z * arrowSize * 0.3\n      );\n      colors.push(color.r, color.g, color.b, color.r, color.g, color.b);\n    }\n\n    // Plane handles (XY, XZ, YZ)\n    const planeSize = size * 0.3;\n    const planeOffset = size * 0.2;\n\n    // XY plane\n    const xyColor = activeAxis === 'xy' ? AXIS_COLORS.highlight : { r: 0.8, g: 0.8, b: 0.2 };\n    vertices.push(pos.x + planeOffset, pos.y + planeOffset, pos.z);\n    vertices.push(pos.x + planeOffset + planeSize, pos.y + planeOffset, pos.z);\n    colors.push(xyColor.r, xyColor.g, xyColor.b, xyColor.r, xyColor.g, xyColor.b);\n    vertices.push(pos.x + planeOffset + planeSize, pos.y + planeOffset, pos.z);\n    vertices.push(pos.x + planeOffset + planeSize, pos.y + planeOffset + planeSize, pos.z);\n    colors.push(xyColor.r, xyColor.g, xyColor.b, xyColor.r, xyColor.g, xyColor.b);\n    vertices.push(pos.x + planeOffset + planeSize, pos.y + planeOffset + planeSize, pos.z);\n    vertices.push(pos.x + planeOffset, pos.y + planeOffset + planeSize, pos.z);\n    colors.push(xyColor.r, xyColor.g, xyColor.b, xyColor.r, xyColor.g, xyColor.b);\n    vertices.push(pos.x + planeOffset, pos.y + planeOffset + planeSize, pos.z);\n    vertices.push(pos.x + planeOffset, pos.y + planeOffset, pos.z);\n    colors.push(xyColor.r, xyColor.g, xyColor.b, xyColor.r, xyColor.g, xyColor.b);\n\n    // XZ plane\n    const xzColor = activeAxis === 'xz' ? AXIS_COLORS.highlight : { r: 0.8, g: 0.2, b: 0.8 };\n    vertices.push(pos.x + planeOffset, pos.y, pos.z + planeOffset);\n    vertices.push(pos.x + planeOffset + planeSize, pos.y, pos.z + planeOffset);\n    colors.push(xzColor.r, xzColor.g, xzColor.b, xzColor.r, xzColor.g, xzColor.b);\n    vertices.push(pos.x + planeOffset + planeSize, pos.y, pos.z + planeOffset);\n    vertices.push(pos.x + planeOffset + planeSize, pos.y, pos.z + planeOffset + planeSize);\n    colors.push(xzColor.r, xzColor.g, xzColor.b, xzColor.r, xzColor.g, xzColor.b);\n    vertices.push(pos.x + planeOffset + planeSize, pos.y, pos.z + planeOffset + planeSize);\n    vertices.push(pos.x + planeOffset, pos.y, pos.z + planeOffset + planeSize);\n    colors.push(xzColor.r, xzColor.g, xzColor.b, xzColor.r, xzColor.g, xzColor.b);\n    vertices.push(pos.x + planeOffset, pos.y, pos.z + planeOffset + planeSize);\n    vertices.push(pos.x + planeOffset, pos.y, pos.z + planeOffset);\n    colors.push(xzColor.r, xzColor.g, xzColor.b, xzColor.r, xzColor.g, xzColor.b);\n\n    // YZ plane\n    const yzColor = activeAxis === 'yz' ? AXIS_COLORS.highlight : { r: 0.2, g: 0.8, b: 0.8 };\n    vertices.push(pos.x, pos.y + planeOffset, pos.z + planeOffset);\n    vertices.push(pos.x, pos.y + planeOffset + planeSize, pos.z + planeOffset);\n    colors.push(yzColor.r, yzColor.g, yzColor.b, yzColor.r, yzColor.g, yzColor.b);\n    vertices.push(pos.x, pos.y + planeOffset + planeSize, pos.z + planeOffset);\n    vertices.push(pos.x, pos.y + planeOffset + planeSize, pos.z + planeOffset + planeSize);\n    colors.push(yzColor.r, yzColor.g, yzColor.b, yzColor.r, yzColor.g, yzColor.b);\n    vertices.push(pos.x, pos.y + planeOffset + planeSize, pos.z + planeOffset + planeSize);\n    vertices.push(pos.x, pos.y + planeOffset, pos.z + planeOffset + planeSize);\n    colors.push(yzColor.r, yzColor.g, yzColor.b, yzColor.r, yzColor.g, yzColor.b);\n    vertices.push(pos.x, pos.y + planeOffset, pos.z + planeOffset + planeSize);\n    vertices.push(pos.x, pos.y + planeOffset, pos.z + planeOffset);\n    colors.push(yzColor.r, yzColor.g, yzColor.b, yzColor.r, yzColor.g, yzColor.b);\n  }\n\n  private addRotateGizmo(\n    pos: Vec3,\n    size: number,\n    activeAxis: string | null,\n    vertices: number[],\n    colors: number[]\n  ): void {\n    const segments = 32;\n\n    // X rotation (around X axis) - YZ plane circle\n    const xColor = activeAxis === 'x' ? AXIS_COLORS.highlight : AXIS_COLORS.x;\n    for (let i = 0; i < segments; i++) {\n      const a1 = (i / segments) * Math.PI * 2;\n      const a2 = ((i + 1) / segments) * Math.PI * 2;\n      vertices.push(pos.x, pos.y + Math.cos(a1) * size, pos.z + Math.sin(a1) * size);\n      vertices.push(pos.x, pos.y + Math.cos(a2) * size, pos.z + Math.sin(a2) * size);\n      colors.push(xColor.r, xColor.g, xColor.b, xColor.r, xColor.g, xColor.b);\n    }\n\n    // Y rotation (around Y axis) - XZ plane circle\n    const yColor = activeAxis === 'y' ? AXIS_COLORS.highlight : AXIS_COLORS.y;\n    for (let i = 0; i < segments; i++) {\n      const a1 = (i / segments) * Math.PI * 2;\n      const a2 = ((i + 1) / segments) * Math.PI * 2;\n      vertices.push(pos.x + Math.cos(a1) * size, pos.y, pos.z + Math.sin(a1) * size);\n      vertices.push(pos.x + Math.cos(a2) * size, pos.y, pos.z + Math.sin(a2) * size);\n      colors.push(yColor.r, yColor.g, yColor.b, yColor.r, yColor.g, yColor.b);\n    }\n\n    // Z rotation (around Z axis) - XY plane circle\n    const zColor = activeAxis === 'z' ? AXIS_COLORS.highlight : AXIS_COLORS.z;\n    for (let i = 0; i < segments; i++) {\n      const a1 = (i / segments) * Math.PI * 2;\n      const a2 = ((i + 1) / segments) * Math.PI * 2;\n      vertices.push(pos.x + Math.cos(a1) * size, pos.y + Math.sin(a1) * size, pos.z);\n      vertices.push(pos.x + Math.cos(a2) * size, pos.y + Math.sin(a2) * size, pos.z);\n      colors.push(zColor.r, zColor.g, zColor.b, zColor.r, zColor.g, zColor.b);\n    }\n  }\n\n  private addScaleGizmo(\n    pos: Vec3,\n    size: number,\n    activeAxis: string | null,\n    vertices: number[],\n    colors: number[]\n  ): void {\n    const axes: Array<{ axis: 'x' | 'y' | 'z'; dir: Vec3 }> = [\n      { axis: 'x', dir: { x: 1, y: 0, z: 0 } },\n      { axis: 'y', dir: { x: 0, y: 1, z: 0 } },\n      { axis: 'z', dir: { x: 0, y: 0, z: 1 } },\n    ];\n\n    for (const { axis, dir } of axes) {\n      const color = activeAxis === axis ? AXIS_COLORS.highlight : AXIS_COLORS[axis];\n\n      // Main axis line\n      vertices.push(pos.x, pos.y, pos.z);\n      vertices.push(pos.x + dir.x * size, pos.y + dir.y * size, pos.z + dir.z * size);\n      colors.push(color.r, color.g, color.b, color.r, color.g, color.b);\n\n      // Box at end\n      const boxSize = size * 0.1;\n      const tip = { x: pos.x + dir.x * size, y: pos.y + dir.y * size, z: pos.z + dir.z * size };\n\n      // Draw cube wireframe at tip\n      const offsets = [\n        [-1, -1, -1], [1, -1, -1], [1, 1, -1], [-1, 1, -1],\n        [-1, -1, 1], [1, -1, 1], [1, 1, 1], [-1, 1, 1],\n      ];\n\n      const edges = [\n        [0, 1], [1, 2], [2, 3], [3, 0],\n        [4, 5], [5, 6], [6, 7], [7, 4],\n        [0, 4], [1, 5], [2, 6], [3, 7],\n      ];\n\n      for (const [a, b] of edges) {\n        const pa = offsets[a];\n        const pb = offsets[b];\n        vertices.push(\n          tip.x + pa[0] * boxSize, tip.y + pa[1] * boxSize, tip.z + pa[2] * boxSize,\n          tip.x + pb[0] * boxSize, tip.y + pb[1] * boxSize, tip.z + pb[2] * boxSize\n        );\n        colors.push(color.r, color.g, color.b, color.r, color.g, color.b);\n      }\n    }\n\n    // Center cube for uniform scale\n    const uniformColor = activeAxis === null ? AXIS_COLORS.highlight : { r: 0.8, g: 0.8, b: 0.8 };\n    const centerSize = size * 0.15;\n    const centerEdges = [\n      [0, 1], [1, 2], [2, 3], [3, 0],\n      [4, 5], [5, 6], [6, 7], [7, 4],\n      [0, 4], [1, 5], [2, 6], [3, 7],\n    ];\n    const centerOffsets = [\n      [-1, -1, -1], [1, -1, -1], [1, 1, -1], [-1, 1, -1],\n      [-1, -1, 1], [1, -1, 1], [1, 1, 1], [-1, 1, 1],\n    ];\n\n    for (const [a, b] of centerEdges) {\n      const pa = centerOffsets[a];\n      const pb = centerOffsets[b];\n      vertices.push(\n        pos.x + pa[0] * centerSize, pos.y + pa[1] * centerSize, pos.z + pa[2] * centerSize,\n        pos.x + pb[0] * centerSize, pos.y + pb[1] * centerSize, pos.z + pb[2] * centerSize\n      );\n      colors.push(uniformColor.r, uniformColor.g, uniformColor.b, uniformColor.r, uniformColor.g, uniformColor.b);\n    }\n  }\n\n  /**\n   * Hit test for gizmo interaction\n   */\n  hitTestGizmo(\n    tool: TransformTool,\n    position: Vec3,\n    ray: { origin: Vec3; direction: Vec3 },\n    cameraDistance: number\n  ): 'x' | 'y' | 'z' | 'xy' | 'xz' | 'yz' | null {\n    if (tool === 'select') return null;\n\n    const size = Math.max(0.5, cameraDistance * 0.1);\n    const threshold = size * 0.15;\n\n    // Test axis proximity\n    const axes: Array<{ axis: 'x' | 'y' | 'z'; dir: Vec3 }> = [\n      { axis: 'x', dir: { x: 1, y: 0, z: 0 } },\n      { axis: 'y', dir: { x: 0, y: 1, z: 0 } },\n      { axis: 'z', dir: { x: 0, y: 0, z: 1 } },\n    ];\n\n    let closestAxis: 'x' | 'y' | 'z' | null = null;\n    let closestDist = threshold;\n\n    for (const { axis, dir } of axes) {\n      const dist = this.distanceToLine(\n        ray.origin,\n        ray.direction,\n        position,\n        { x: position.x + dir.x * size, y: position.y + dir.y * size, z: position.z + dir.z * size }\n      );\n\n      if (dist < closestDist) {\n        closestDist = dist;\n        closestAxis = axis;\n      }\n    }\n\n    return closestAxis;\n  }\n\n  private distanceToLine(\n    rayOrigin: Vec3,\n    rayDir: Vec3,\n    lineStart: Vec3,\n    lineEnd: Vec3\n  ): number {\n    // Simplified distance calculation\n    const w0 = {\n      x: rayOrigin.x - lineStart.x,\n      y: rayOrigin.y - lineStart.y,\n      z: rayOrigin.z - lineStart.z,\n    };\n    const u = {\n      x: lineEnd.x - lineStart.x,\n      y: lineEnd.y - lineStart.y,\n      z: lineEnd.z - lineStart.z,\n    };\n\n    const a = rayDir.x * rayDir.x + rayDir.y * rayDir.y + rayDir.z * rayDir.z;\n    const b = rayDir.x * u.x + rayDir.y * u.y + rayDir.z * u.z;\n    const c = u.x * u.x + u.y * u.y + u.z * u.z;\n    const d = rayDir.x * w0.x + rayDir.y * w0.y + rayDir.z * w0.z;\n    const e = u.x * w0.x + u.y * w0.y + u.z * w0.z;\n\n    const denom = a * c - b * b;\n    if (Math.abs(denom) < 0.0001) return Infinity;\n\n    const sc = (b * e - c * d) / denom;\n    const tc = Math.max(0, Math.min(1, (a * e - b * d) / denom));\n\n    const point1 = {\n      x: rayOrigin.x + rayDir.x * sc,\n      y: rayOrigin.y + rayDir.y * sc,\n      z: rayOrigin.z + rayDir.z * sc,\n    };\n    const point2 = {\n      x: lineStart.x + u.x * tc,\n      y: lineStart.y + u.y * tc,\n      z: lineStart.z + u.z * tc,\n    };\n\n    const dx = point1.x - point2.x;\n    const dy = point1.y - point2.y;\n    const dz = point1.z - point2.z;\n\n    return Math.sqrt(dx * dx + dy * dy + dz * dz);\n  }\n}\n","/**\n * Grid Renderer\n *\n * Renders floor grid and axes for scene orientation.\n */\n\nexport interface GridData {\n  vertices: Float32Array;\n  colors: Float32Array;\n}\n\nexport class GridRenderer {\n  private gridSize: number;\n  private gridDivisions: number;\n\n  constructor(size: number = 10, divisions: number = 10) {\n    this.gridSize = size;\n    this.gridDivisions = divisions;\n  }\n\n  /**\n   * Generate grid line data\n   */\n  generateGrid(): GridData {\n    const vertices: number[] = [];\n    const colors: number[] = [];\n\n    const step = this.gridSize / this.gridDivisions;\n    const half = this.gridSize / 2;\n\n    // Grid lines\n    for (let i = 0; i <= this.gridDivisions; i++) {\n      const pos = -half + i * step;\n      const isCenter = Math.abs(pos) < 0.001;\n\n      // X-parallel lines (along Z)\n      vertices.push(-half, 0, pos);\n      vertices.push(half, 0, pos);\n\n      if (isCenter) {\n        // Center line (blue for Z axis direction)\n        colors.push(0.2, 0.2, 0.6, 0.2, 0.2, 0.6);\n      } else {\n        colors.push(0.3, 0.3, 0.3, 0.3, 0.3, 0.3);\n      }\n\n      // Z-parallel lines (along X)\n      vertices.push(pos, 0, -half);\n      vertices.push(pos, 0, half);\n\n      if (isCenter) {\n        // Center line (red for X axis direction)\n        colors.push(0.6, 0.2, 0.2, 0.6, 0.2, 0.2);\n      } else {\n        colors.push(0.3, 0.3, 0.3, 0.3, 0.3, 0.3);\n      }\n    }\n\n    return {\n      vertices: new Float32Array(vertices),\n      colors: new Float32Array(colors),\n    };\n  }\n\n  /**\n   * Generate axes indicator data\n   */\n  generateAxes(size: number = 1): GridData {\n    const vertices: number[] = [];\n    const colors: number[] = [];\n\n    // X axis (red)\n    vertices.push(0, 0, 0);\n    vertices.push(size, 0, 0);\n    colors.push(1, 0.2, 0.2, 1, 0.2, 0.2);\n\n    // Y axis (green)\n    vertices.push(0, 0, 0);\n    vertices.push(0, size, 0);\n    colors.push(0.2, 1, 0.2, 0.2, 1, 0.2);\n\n    // Z axis (blue)\n    vertices.push(0, 0, 0);\n    vertices.push(0, 0, size);\n    colors.push(0.2, 0.4, 1, 0.2, 0.4, 1);\n\n    return {\n      vertices: new Float32Array(vertices),\n      colors: new Float32Array(colors),\n    };\n  }\n\n  /**\n   * Generate corner axes gizmo (for viewport corner)\n   */\n  generateCornerAxes(size: number = 0.5): {\n    lines: { vertices: number[]; colors: number[] };\n    labels: { x: string; y: string; z: string };\n  } {\n    const vertices: number[] = [];\n    const colors: number[] = [];\n\n    // X axis\n    vertices.push(0, 0, 0, size, 0, 0);\n    colors.push(1, 0.3, 0.3, 1, 0.3, 0.3);\n\n    // Y axis\n    vertices.push(0, 0, 0, 0, size, 0);\n    colors.push(0.3, 1, 0.3, 0.3, 1, 0.3);\n\n    // Z axis\n    vertices.push(0, 0, 0, 0, 0, size);\n    colors.push(0.3, 0.5, 1, 0.3, 0.5, 1);\n\n    return {\n      lines: { vertices, colors },\n      labels: { x: 'X', y: 'Y', z: 'Z' },\n    };\n  }\n\n  setSize(size: number): void {\n    this.gridSize = size;\n  }\n\n  setDivisions(divisions: number): void {\n    this.gridDivisions = divisions;\n  }\n}\n","/**\n * Model Engine\n *\n * Extended 3D engine for zModel with selection, gizmos, grid rendering.\n */\n\nimport { WebGL3DEngine, type Scene3D, type WebGLState } from '@z-os/core';\nimport type { EditableMesh, SelectionState, TransformTool, GizmoState, SelectionMode, Vec3, Color, Camera3D, Light3D, ModelScene } from '../types';\nimport { SelectionRenderer, type SelectionRenderData } from './SelectionRenderer';\nimport { GizmoRenderer } from './GizmoRenderer';\nimport { GridRenderer } from './GridRenderer';\n\n// Line shader for overlays\nconst LINE_VERTEX_SHADER = `\n  attribute vec3 aPosition;\n  attribute vec3 aColor;\n  uniform mat4 uViewProjection;\n  varying vec3 vColor;\n  void main() {\n    vColor = aColor;\n    gl_Position = uViewProjection * vec4(aPosition, 1.0);\n    gl_PointSize = 8.0;\n  }\n`;\n\nconst LINE_FRAGMENT_SHADER = `\n  precision mediump float;\n  varying vec3 vColor;\n  void main() {\n    gl_FragColor = vec4(vColor, 1.0);\n  }\n`;\n\nexport class ModelEngine {\n  private engine: WebGL3DEngine;\n  private gl: WebGLRenderingContext;\n  private canvas: HTMLCanvasElement;\n\n  private lineProgram: WebGLProgram | null = null;\n  private lineUniforms: Record<string, WebGLUniformLocation | null> = {};\n  private lineAttributes: Record<string, number> = {};\n  private lineVBO: WebGLBuffer | null = null;\n  private lineColorVBO: WebGLBuffer | null = null;\n\n  private selectionRenderer: SelectionRenderer;\n  private gizmoRenderer: GizmoRenderer;\n  private gridRenderer: GridRenderer;\n\n  private meshes: EditableMesh[] = [];\n  private selection: SelectionState = {\n    selectedObjects: [],\n    selectedVertices: [],\n    selectedEdges: [],\n    selectedFaces: [],\n    activeObject: null,\n  };\n  private gizmoState: GizmoState = {\n    visible: false,\n    position: { x: 0, y: 0, z: 0 },\n    rotation: { x: 0, y: 0, z: 0 },\n    scale: { x: 1, y: 1, z: 1 },\n    activeAxis: null,\n    dragging: false,\n  };\n\n  private showGrid = true;\n  private showAxes = true;\n\n  constructor(canvas: HTMLCanvasElement, width: number, height: number) {\n    this.canvas = canvas;\n    this.engine = new WebGL3DEngine(canvas, {\n      width,\n      height,\n      antialias: true,\n      alpha: false,\n      depth: true,\n    });\n\n    const gl = canvas.getContext('webgl');\n    if (!gl) throw new Error('WebGL not available');\n    this.gl = gl;\n\n    this.selectionRenderer = new SelectionRenderer();\n    this.gizmoRenderer = new GizmoRenderer();\n    this.gridRenderer = new GridRenderer(20, 20);\n\n    this.initLineShaders();\n    this.initDefaultScene();\n  }\n\n  private initLineShaders(): void {\n    const { gl } = this;\n\n    // Create shaders\n    const vs = gl.createShader(gl.VERTEX_SHADER)!;\n    gl.shaderSource(vs, LINE_VERTEX_SHADER);\n    gl.compileShader(vs);\n\n    const fs = gl.createShader(gl.FRAGMENT_SHADER)!;\n    gl.shaderSource(fs, LINE_FRAGMENT_SHADER);\n    gl.compileShader(fs);\n\n    this.lineProgram = gl.createProgram()!;\n    gl.attachShader(this.lineProgram, vs);\n    gl.attachShader(this.lineProgram, fs);\n    gl.linkProgram(this.lineProgram);\n\n    gl.deleteShader(vs);\n    gl.deleteShader(fs);\n\n    this.lineUniforms = {\n      viewProjection: gl.getUniformLocation(this.lineProgram, 'uViewProjection'),\n    };\n\n    this.lineAttributes = {\n      position: gl.getAttribLocation(this.lineProgram, 'aPosition'),\n      color: gl.getAttribLocation(this.lineProgram, 'aColor'),\n    };\n\n    this.lineVBO = gl.createBuffer();\n    this.lineColorVBO = gl.createBuffer();\n  }\n\n  private initDefaultScene(): void {\n    const scene = this.engine.createScene('Main');\n\n    // Add lights\n    this.engine.addAmbientLight(scene, { r: 255, g: 255, b: 255, a: 1 }, 0.4);\n    this.engine.addDirectionalLight(\n      scene,\n      { x: 1, y: -1, z: -0.5 },\n      { r: 255, g: 255, b: 255, a: 1 },\n      0.8\n    );\n\n    // Set background\n    scene.background = { r: 45, g: 45, b: 50, a: 1 };\n\n    // Set camera\n    scene.camera.position = { x: 5, y: 4, z: 5 };\n    scene.camera.target = { x: 0, y: 0, z: 0 };\n  }\n\n  // ============================================================================\n  // Public API\n  // ============================================================================\n\n  getWebGLEngine(): WebGL3DEngine {\n    return this.engine;\n  }\n\n  getScene(): Scene3D | undefined {\n    return this.engine.getActiveScene();\n  }\n\n  getCamera(): Camera3D | undefined {\n    return this.engine.getActiveScene()?.camera;\n  }\n\n  getMeshes(): EditableMesh[] {\n    return this.meshes;\n  }\n\n  getMesh(id: string): EditableMesh | undefined {\n    return this.meshes.find(m => m.id === id);\n  }\n\n  addMesh(mesh: EditableMesh): void {\n    this.meshes.push(mesh);\n    this.selectionRenderer.setMeshes(this.meshes);\n    this.syncMeshesToEngine();\n  }\n\n  removeMesh(id: string): void {\n    this.meshes = this.meshes.filter(m => m.id !== id);\n    this.selection.selectedObjects = this.selection.selectedObjects.filter(s => s !== id);\n    if (this.selection.activeObject === id) {\n      this.selection.activeObject = null;\n    }\n    this.selectionRenderer.setMeshes(this.meshes);\n    this.syncMeshesToEngine();\n  }\n\n  updateMesh(id: string, updates: Partial<EditableMesh>): void {\n    const mesh = this.meshes.find(m => m.id === id);\n    if (mesh) {\n      Object.assign(mesh, updates);\n      this.syncMeshesToEngine();\n    }\n  }\n\n  duplicateMesh(id: string): EditableMesh | null {\n    const source = this.meshes.find(m => m.id === id);\n    if (!source) return null;\n\n    const newMesh: EditableMesh = {\n      ...source,\n      id: `mesh-${Date.now().toString(36)}-${Math.random().toString(36).substring(2, 7)}`,\n      name: `${source.name}.001`,\n      geometry: { ...source.geometry, id: `geo-${Date.now().toString(36)}` },\n      material: { ...source.material, id: `mat-${Date.now().toString(36)}` },\n      transform: {\n        position: { ...source.transform.position, x: source.transform.position.x + 1 },\n        rotation: { ...source.transform.rotation },\n        scale: { ...source.transform.scale },\n      },\n    };\n\n    this.addMesh(newMesh);\n    return newMesh;\n  }\n\n  // ============================================================================\n  // Selection\n  // ============================================================================\n\n  getSelection(): SelectionState {\n    return this.selection;\n  }\n\n  setSelection(selection: Partial<SelectionState>): void {\n    Object.assign(this.selection, selection);\n    this.updateGizmoPosition();\n  }\n\n  selectObject(id: string, addToSelection = false): void {\n    if (addToSelection) {\n      if (!this.selection.selectedObjects.includes(id)) {\n        this.selection.selectedObjects.push(id);\n      }\n    } else {\n      this.selection.selectedObjects = [id];\n    }\n    this.selection.activeObject = id;\n    this.updateGizmoPosition();\n  }\n\n  deselectAll(): void {\n    this.selection = {\n      selectedObjects: [],\n      selectedVertices: [],\n      selectedEdges: [],\n      selectedFaces: [],\n      activeObject: null,\n    };\n    this.gizmoState.visible = false;\n  }\n\n  private updateGizmoPosition(): void {\n    if (this.selection.selectedObjects.length === 0) {\n      this.gizmoState.visible = false;\n      return;\n    }\n\n    // Calculate center of selection\n    let cx = 0, cy = 0, cz = 0;\n    let count = 0;\n\n    for (const id of this.selection.selectedObjects) {\n      const mesh = this.meshes.find(m => m.id === id);\n      if (mesh) {\n        cx += mesh.transform.position.x;\n        cy += mesh.transform.position.y;\n        cz += mesh.transform.position.z;\n        count++;\n      }\n    }\n\n    if (count > 0) {\n      this.gizmoState.position = { x: cx / count, y: cy / count, z: cz / count };\n      this.gizmoState.visible = true;\n    }\n  }\n\n  // ============================================================================\n  // Gizmo\n  // ============================================================================\n\n  getGizmoState(): GizmoState {\n    return this.gizmoState;\n  }\n\n  setGizmoState(state: Partial<GizmoState>): void {\n    Object.assign(this.gizmoState, state);\n  }\n\n  // ============================================================================\n  // Rendering\n  // ============================================================================\n\n  resize(width: number, height: number): void {\n    this.engine.resize(width, height);\n  }\n\n  start(callback?: (dt: number) => void): void {\n    this.engine.start((dt) => {\n      callback?.(dt);\n    });\n  }\n\n  stop(): void {\n    this.engine.stop();\n  }\n\n  render(\n    tool: TransformTool,\n    selectionMode: SelectionMode,\n    isEditMode: boolean\n  ): void {\n    const scene = this.engine.getActiveScene();\n    if (!scene) return;\n\n    const { gl } = this;\n\n    // Render overlays after main scene\n    this.renderOverlays(tool, selectionMode, isEditMode);\n  }\n\n  private renderOverlays(\n    tool: TransformTool,\n    selectionMode: SelectionMode,\n    isEditMode: boolean\n  ): void {\n    const scene = this.engine.getActiveScene();\n    if (!scene || !this.lineProgram) return;\n\n    const { gl } = this;\n\n    // Build view-projection matrix\n    const camera = scene.camera;\n    const viewProjection = this.buildViewProjectionMatrix(camera);\n\n    gl.useProgram(this.lineProgram);\n    gl.uniformMatrix4fv(this.lineUniforms.viewProjection, false, viewProjection);\n\n    // Disable depth test for overlays\n    gl.disable(gl.DEPTH_TEST);\n\n    // Grid\n    if (this.showGrid) {\n      const gridData = this.gridRenderer.generateGrid();\n      this.drawLines(gridData.vertices, gridData.colors);\n    }\n\n    // Axes\n    if (this.showAxes) {\n      gl.enable(gl.DEPTH_TEST);\n      const axesData = this.gridRenderer.generateAxes(1);\n      this.drawLines(axesData.vertices, axesData.colors);\n      gl.disable(gl.DEPTH_TEST);\n    }\n\n    // Selection\n    const selectionData = this.selectionRenderer.generateRenderData(\n      this.selection,\n      selectionMode,\n      isEditMode\n    );\n\n    // Object outlines (orange)\n    if (selectionData.outlineVertices.length > 0) {\n      const outlineColors = new Float32Array(selectionData.outlineVertices.length);\n      for (let i = 0; i < outlineColors.length; i += 3) {\n        outlineColors[i] = 1;\n        outlineColors[i + 1] = 0.6;\n        outlineColors[i + 2] = 0.2;\n      }\n      this.drawLines(selectionData.outlineVertices, outlineColors);\n    }\n\n    // Selected vertices (yellow points)\n    if (selectionData.vertices.length > 0) {\n      const vertexColors = new Float32Array(selectionData.vertices.length);\n      for (let i = 0; i < vertexColors.length; i += 3) {\n        vertexColors[i] = 1;\n        vertexColors[i + 1] = 1;\n        vertexColors[i + 2] = 0.2;\n      }\n      this.drawPoints(selectionData.vertices, vertexColors);\n    }\n\n    // Selected edges (yellow lines)\n    if (selectionData.edges.length > 0) {\n      const edgeColors = new Float32Array(selectionData.edges.length);\n      for (let i = 0; i < edgeColors.length; i += 3) {\n        edgeColors[i] = 1;\n        edgeColors[i + 1] = 1;\n        edgeColors[i + 2] = 0.2;\n      }\n      this.drawLines(selectionData.edges, edgeColors);\n    }\n\n    // Gizmo\n    if (this.gizmoState.visible) {\n      const cameraDistance = Math.sqrt(\n        Math.pow(camera.position.x - this.gizmoState.position.x, 2) +\n        Math.pow(camera.position.y - this.gizmoState.position.y, 2) +\n        Math.pow(camera.position.z - this.gizmoState.position.z, 2)\n      );\n      const gizmoData = this.gizmoRenderer.generateGizmoLines(tool, this.gizmoState, cameraDistance);\n      if (gizmoData.vertices.length > 0) {\n        this.drawLines(\n          new Float32Array(gizmoData.vertices),\n          new Float32Array(gizmoData.colors)\n        );\n      }\n    }\n\n    gl.enable(gl.DEPTH_TEST);\n  }\n\n  private drawLines(vertices: Float32Array, colors: Float32Array): void {\n    const { gl } = this;\n    if (vertices.length === 0) return;\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.lineVBO);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.DYNAMIC_DRAW);\n    gl.enableVertexAttribArray(this.lineAttributes.position);\n    gl.vertexAttribPointer(this.lineAttributes.position, 3, gl.FLOAT, false, 0, 0);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.lineColorVBO);\n    gl.bufferData(gl.ARRAY_BUFFER, colors, gl.DYNAMIC_DRAW);\n    gl.enableVertexAttribArray(this.lineAttributes.color);\n    gl.vertexAttribPointer(this.lineAttributes.color, 3, gl.FLOAT, false, 0, 0);\n\n    gl.drawArrays(gl.LINES, 0, vertices.length / 3);\n  }\n\n  private drawPoints(vertices: Float32Array, colors: Float32Array): void {\n    const { gl } = this;\n    if (vertices.length === 0) return;\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.lineVBO);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.DYNAMIC_DRAW);\n    gl.enableVertexAttribArray(this.lineAttributes.position);\n    gl.vertexAttribPointer(this.lineAttributes.position, 3, gl.FLOAT, false, 0, 0);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.lineColorVBO);\n    gl.bufferData(gl.ARRAY_BUFFER, colors, gl.DYNAMIC_DRAW);\n    gl.enableVertexAttribArray(this.lineAttributes.color);\n    gl.vertexAttribPointer(this.lineAttributes.color, 3, gl.FLOAT, false, 0, 0);\n\n    gl.drawArrays(gl.POINTS, 0, vertices.length / 3);\n  }\n\n  private buildViewProjectionMatrix(camera: Camera3D): Float32Array {\n    // Build view matrix (lookAt)\n    const zAxis = this.normalize({\n      x: camera.position.x - camera.target.x,\n      y: camera.position.y - camera.target.y,\n      z: camera.position.z - camera.target.z,\n    });\n    const xAxis = this.normalize(this.cross(camera.up, zAxis));\n    const yAxis = this.cross(zAxis, xAxis);\n\n    const view = new Float32Array([\n      xAxis.x, yAxis.x, zAxis.x, 0,\n      xAxis.y, yAxis.y, zAxis.y, 0,\n      xAxis.z, yAxis.z, zAxis.z, 0,\n      -this.dot(xAxis, camera.position),\n      -this.dot(yAxis, camera.position),\n      -this.dot(zAxis, camera.position),\n      1,\n    ]);\n\n    // Build projection matrix\n    const state = this.engine.getState();\n    const aspect = state.width / state.height;\n    let proj: Float32Array;\n\n    if (camera.type === 'perspective') {\n      const f = 1 / Math.tan(camera.fov / 2);\n      const rangeInv = 1 / (camera.near - camera.far);\n      proj = new Float32Array([\n        f / aspect, 0, 0, 0,\n        0, f, 0, 0,\n        0, 0, (camera.near + camera.far) * rangeInv, -1,\n        0, 0, camera.near * camera.far * rangeInv * 2, 0,\n      ]);\n    } else {\n      const hw = camera.zoom * aspect;\n      const hh = camera.zoom;\n      proj = new Float32Array([\n        1 / hw, 0, 0, 0,\n        0, 1 / hh, 0, 0,\n        0, 0, -2 / (camera.far - camera.near), 0,\n        0, 0, -(camera.far + camera.near) / (camera.far - camera.near), 1,\n      ]);\n    }\n\n    // Multiply projection * view\n    return this.multiplyMatrices(proj, view);\n  }\n\n  private normalize(v: Vec3): Vec3 {\n    const len = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\n    return len > 0 ? { x: v.x / len, y: v.y / len, z: v.z / len } : { x: 0, y: 0, z: 0 };\n  }\n\n  private cross(a: Vec3, b: Vec3): Vec3 {\n    return {\n      x: a.y * b.z - a.z * b.y,\n      y: a.z * b.x - a.x * b.z,\n      z: a.x * b.y - a.y * b.x,\n    };\n  }\n\n  private dot(a: Vec3, b: Vec3): number {\n    return a.x * b.x + a.y * b.y + a.z * b.z;\n  }\n\n  private multiplyMatrices(a: Float32Array, b: Float32Array): Float32Array {\n    const out = new Float32Array(16);\n    for (let i = 0; i < 4; i++) {\n      for (let j = 0; j < 4; j++) {\n        out[i * 4 + j] =\n          a[i * 4 + 0] * b[0 * 4 + j] +\n          a[i * 4 + 1] * b[1 * 4 + j] +\n          a[i * 4 + 2] * b[2 * 4 + j] +\n          a[i * 4 + 3] * b[3 * 4 + j];\n      }\n    }\n    return out;\n  }\n\n  // ============================================================================\n  // Sync meshes to base engine\n  // ============================================================================\n\n  private syncMeshesToEngine(): void {\n    const scene = this.engine.getActiveScene();\n    if (!scene) return;\n\n    // Clear existing meshes\n    scene.meshes = [];\n\n    // Add editable meshes to scene\n    for (const mesh of this.meshes) {\n      if (!mesh.visible) continue;\n\n      // Create geometry in engine\n      const geometry = {\n        id: mesh.geometry.id,\n        vertices: mesh.geometry.vertices,\n        normals: mesh.geometry.normals,\n        uvs: mesh.geometry.uvs,\n        indices: mesh.geometry.indices,\n        vertexCount: mesh.geometry.vertexCount,\n      };\n\n      // Upload geometry if needed (simplified - in production would cache)\n      const engineMesh = this.engine.createMesh(geometry, mesh.material, mesh.transform);\n      engineMesh.id = mesh.id;\n      engineMesh.name = mesh.name;\n      engineMesh.visible = mesh.visible;\n\n      scene.meshes.push(engineMesh);\n    }\n  }\n\n  // ============================================================================\n  // Utility\n  // ============================================================================\n\n  setGridVisible(visible: boolean): void {\n    this.showGrid = visible;\n  }\n\n  setAxesVisible(visible: boolean): void {\n    this.showAxes = visible;\n  }\n\n  getState(): WebGLState {\n    return this.engine.getState();\n  }\n\n  subscribe(callback: (state: WebGLState) => void): () => void {\n    return this.engine.subscribe(callback);\n  }\n\n  destroy(): void {\n    const { gl } = this;\n    if (this.lineProgram) gl.deleteProgram(this.lineProgram);\n    if (this.lineVBO) gl.deleteBuffer(this.lineVBO);\n    if (this.lineColorVBO) gl.deleteBuffer(this.lineColorVBO);\n    this.engine.destroy();\n  }\n}\n","/**\n * Raycasting utilities for object selection\n */\n\nimport type { Vec3, Camera3D, EditableMesh, Transform3D } from '../types';\n\nexport interface Ray {\n  origin: Vec3;\n  direction: Vec3;\n}\n\nexport interface RaycastHit {\n  meshId: string;\n  distance: number;\n  point: Vec3;\n  faceIndex: number;\n  vertexIndex?: number;\n}\n\n// Vector math helpers\nfunction vec3Sub(a: Vec3, b: Vec3): Vec3 {\n  return { x: a.x - b.x, y: a.y - b.y, z: a.z - b.z };\n}\n\nfunction vec3Add(a: Vec3, b: Vec3): Vec3 {\n  return { x: a.x + b.x, y: a.y + b.y, z: a.z + b.z };\n}\n\nfunction vec3Scale(v: Vec3, s: number): Vec3 {\n  return { x: v.x * s, y: v.y * s, z: v.z * s };\n}\n\nfunction vec3Dot(a: Vec3, b: Vec3): number {\n  return a.x * b.x + a.y * b.y + a.z * b.z;\n}\n\nfunction vec3Cross(a: Vec3, b: Vec3): Vec3 {\n  return {\n    x: a.y * b.z - a.z * b.y,\n    y: a.z * b.x - a.x * b.z,\n    z: a.x * b.y - a.y * b.x,\n  };\n}\n\nfunction vec3Normalize(v: Vec3): Vec3 {\n  const len = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\n  if (len === 0) return { x: 0, y: 0, z: 0 };\n  return { x: v.x / len, y: v.y / len, z: v.z / len };\n}\n\nfunction vec3Length(v: Vec3): number {\n  return Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\n}\n\n// Transform a point by a transform\nfunction transformPoint(p: Vec3, t: Transform3D): Vec3 {\n  // Apply scale\n  let result = { x: p.x * t.scale.x, y: p.y * t.scale.y, z: p.z * t.scale.z };\n\n  // Apply rotation (Euler XYZ)\n  const { rotation } = t;\n\n  // Rotate X\n  const cosX = Math.cos(rotation.x);\n  const sinX = Math.sin(rotation.x);\n  result = {\n    x: result.x,\n    y: result.y * cosX - result.z * sinX,\n    z: result.y * sinX + result.z * cosX,\n  };\n\n  // Rotate Y\n  const cosY = Math.cos(rotation.y);\n  const sinY = Math.sin(rotation.y);\n  result = {\n    x: result.x * cosY + result.z * sinY,\n    y: result.y,\n    z: -result.x * sinY + result.z * cosY,\n  };\n\n  // Rotate Z\n  const cosZ = Math.cos(rotation.z);\n  const sinZ = Math.sin(rotation.z);\n  result = {\n    x: result.x * cosZ - result.y * sinZ,\n    y: result.x * sinZ + result.y * cosZ,\n    z: result.z,\n  };\n\n  // Apply translation\n  return vec3Add(result, t.position);\n}\n\n/**\n * Get ray from mouse position in screen space\n */\nexport function getRayFromMouse(\n  mouseX: number,\n  mouseY: number,\n  width: number,\n  height: number,\n  camera: Camera3D\n): Ray {\n  // Convert to normalized device coordinates (-1 to 1)\n  const ndcX = (mouseX / width) * 2 - 1;\n  const ndcY = 1 - (mouseY / height) * 2;\n\n  const origin = camera.position;\n  const forward = vec3Normalize(vec3Sub(camera.target, camera.position));\n  const right = vec3Normalize(vec3Cross(forward, camera.up));\n  const up = vec3Cross(right, forward);\n\n  // Calculate ray direction based on camera type\n  let direction: Vec3;\n  if (camera.type === 'perspective') {\n    const fovScale = Math.tan(camera.fov / 2);\n    const aspect = width / height;\n    direction = vec3Normalize({\n      x: forward.x + right.x * ndcX * fovScale * aspect + up.x * ndcY * fovScale,\n      y: forward.y + right.y * ndcX * fovScale * aspect + up.y * ndcY * fovScale,\n      z: forward.z + right.z * ndcX * fovScale * aspect + up.z * ndcY * fovScale,\n    });\n  } else {\n    // Orthographic\n    const orthoWidth = camera.zoom * 2 * (width / height);\n    const orthoHeight = camera.zoom * 2;\n    const rayOrigin: Vec3 = {\n      x: origin.x + right.x * ndcX * orthoWidth / 2 + up.x * ndcY * orthoHeight / 2,\n      y: origin.y + right.y * ndcX * orthoWidth / 2 + up.y * ndcY * orthoHeight / 2,\n      z: origin.z + right.z * ndcX * orthoWidth / 2 + up.z * ndcY * orthoHeight / 2,\n    };\n    return { origin: rayOrigin, direction: forward };\n  }\n\n  return { origin, direction };\n}\n\n/**\n * Ray-triangle intersection using Moller-Trumbore algorithm\n */\nfunction rayTriangleIntersect(\n  ray: Ray,\n  v0: Vec3,\n  v1: Vec3,\n  v2: Vec3\n): { hit: boolean; distance: number; point: Vec3 } {\n  const EPSILON = 0.000001;\n\n  const edge1 = vec3Sub(v1, v0);\n  const edge2 = vec3Sub(v2, v0);\n  const h = vec3Cross(ray.direction, edge2);\n  const a = vec3Dot(edge1, h);\n\n  if (a > -EPSILON && a < EPSILON) {\n    return { hit: false, distance: Infinity, point: { x: 0, y: 0, z: 0 } };\n  }\n\n  const f = 1.0 / a;\n  const s = vec3Sub(ray.origin, v0);\n  const u = f * vec3Dot(s, h);\n\n  if (u < 0.0 || u > 1.0) {\n    return { hit: false, distance: Infinity, point: { x: 0, y: 0, z: 0 } };\n  }\n\n  const q = vec3Cross(s, edge1);\n  const v = f * vec3Dot(ray.direction, q);\n\n  if (v < 0.0 || u + v > 1.0) {\n    return { hit: false, distance: Infinity, point: { x: 0, y: 0, z: 0 } };\n  }\n\n  const t = f * vec3Dot(edge2, q);\n\n  if (t > EPSILON) {\n    const point = vec3Add(ray.origin, vec3Scale(ray.direction, t));\n    return { hit: true, distance: t, point };\n  }\n\n  return { hit: false, distance: Infinity, point: { x: 0, y: 0, z: 0 } };\n}\n\n/**\n * Raycast against a mesh\n */\nexport function raycastMesh(ray: Ray, mesh: EditableMesh): RaycastHit | null {\n  if (!mesh.visible) return null;\n\n  const { geometry, transform } = mesh;\n  const { vertices, indices } = geometry;\n\n  let closestHit: RaycastHit | null = null;\n  let closestDist = Infinity;\n\n  // Iterate through triangles\n  for (let i = 0; i < indices.length; i += 3) {\n    const i0 = indices[i];\n    const i1 = indices[i + 1];\n    const i2 = indices[i + 2];\n\n    // Get vertices and transform them\n    const v0: Vec3 = { x: vertices[i0 * 3], y: vertices[i0 * 3 + 1], z: vertices[i0 * 3 + 2] };\n    const v1: Vec3 = { x: vertices[i1 * 3], y: vertices[i1 * 3 + 1], z: vertices[i1 * 3 + 2] };\n    const v2: Vec3 = { x: vertices[i2 * 3], y: vertices[i2 * 3 + 1], z: vertices[i2 * 3 + 2] };\n\n    const tv0 = transformPoint(v0, transform);\n    const tv1 = transformPoint(v1, transform);\n    const tv2 = transformPoint(v2, transform);\n\n    const result = rayTriangleIntersect(ray, tv0, tv1, tv2);\n\n    if (result.hit && result.distance < closestDist) {\n      closestDist = result.distance;\n      closestHit = {\n        meshId: mesh.id,\n        distance: result.distance,\n        point: result.point,\n        faceIndex: Math.floor(i / 3),\n      };\n    }\n  }\n\n  return closestHit;\n}\n\n/**\n * Raycast against all meshes in scene\n */\nexport function raycast(ray: Ray, meshes: EditableMesh[]): RaycastHit | null {\n  let closestHit: RaycastHit | null = null;\n  let closestDist = Infinity;\n\n  for (const mesh of meshes) {\n    const hit = raycastMesh(ray, mesh);\n    if (hit && hit.distance < closestDist) {\n      closestDist = hit.distance;\n      closestHit = hit;\n    }\n  }\n\n  return closestHit;\n}\n\n/**\n * Find closest vertex to a point on a mesh\n */\nexport function findClosestVertex(mesh: EditableMesh, point: Vec3): number {\n  const { geometry, transform } = mesh;\n  const { vertices } = geometry;\n\n  let closestIdx = 0;\n  let closestDist = Infinity;\n\n  for (let i = 0; i < geometry.vertexCount; i++) {\n    const v: Vec3 = { x: vertices[i * 3], y: vertices[i * 3 + 1], z: vertices[i * 3 + 2] };\n    const tv = transformPoint(v, transform);\n    const dist = vec3Length(vec3Sub(tv, point));\n    if (dist < closestDist) {\n      closestDist = dist;\n      closestIdx = i;\n    }\n  }\n\n  return closestIdx;\n}\n\n/**\n * Check if a point is near an edge\n */\nexport function isPointNearEdge(\n  mesh: EditableMesh,\n  point: Vec3,\n  edgeIdx: number,\n  threshold: number\n): boolean {\n  const { geometry, transform } = mesh;\n  const { vertices, edges } = geometry;\n  const edge = edges[edgeIdx];\n\n  const v0: Vec3 = { x: vertices[edge.a * 3], y: vertices[edge.a * 3 + 1], z: vertices[edge.a * 3 + 2] };\n  const v1: Vec3 = { x: vertices[edge.b * 3], y: vertices[edge.b * 3 + 1], z: vertices[edge.b * 3 + 2] };\n\n  const tv0 = transformPoint(v0, transform);\n  const tv1 = transformPoint(v1, transform);\n\n  // Calculate distance from point to line segment\n  const line = vec3Sub(tv1, tv0);\n  const len = vec3Length(line);\n  if (len === 0) return vec3Length(vec3Sub(point, tv0)) < threshold;\n\n  const t = Math.max(0, Math.min(1, vec3Dot(vec3Sub(point, tv0), line) / (len * len)));\n  const projection = vec3Add(tv0, vec3Scale(line, t));\n  const dist = vec3Length(vec3Sub(point, projection));\n\n  return dist < threshold;\n}\n","/**\n * Viewport Component\n *\n * Main 3D viewport with canvas and interaction handling.\n */\n\nimport React, { useRef, useEffect, useCallback, useState } from 'react';\nimport { useOrbitControls } from '@z-os/sdk';\nimport type { TransformTool, EditMode, SelectionMode, ShadingMode, EditableMesh, Vec3 } from '../types';\nimport { ModelEngine } from '../engine/ModelEngine';\nimport { raycast, getRayFromMouse } from '../engine/raycast';\n\nexport interface ViewportProps {\n  engine: ModelEngine | null;\n  tool: TransformTool;\n  editMode: EditMode;\n  selectionMode: SelectionMode;\n  shadingMode: ShadingMode;\n  onEngineReady: (engine: ModelEngine) => void;\n  onSelect: (meshId: string | null, addToSelection: boolean) => void;\n}\n\nexport function Viewport({\n  engine,\n  tool,\n  editMode,\n  selectionMode,\n  shadingMode,\n  onEngineReady,\n  onSelect,\n}: ViewportProps): React.ReactElement {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const engineRef = useRef<ModelEngine | null>(null);\n\n  // Camera orbit state\n  const [cameraState, setCameraState] = useState({\n    distance: 8,\n    theta: Math.PI / 4,\n    phi: Math.PI / 3,\n    target: { x: 0, y: 0, z: 0 } as Vec3,\n  });\n  const isDraggingRef = useRef(false);\n  const isPanningRef = useRef(false);\n  const lastMouseRef = useRef({ x: 0, y: 0 });\n\n  // Initialize engine\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const container = containerRef.current;\n    if (!canvas || !container) return;\n\n    const rect = container.getBoundingClientRect();\n    const modelEngine = new ModelEngine(canvas, rect.width, rect.height);\n    engineRef.current = modelEngine;\n\n    modelEngine.start();\n    onEngineReady(modelEngine);\n\n    // Handle resize\n    const resizeObserver = new ResizeObserver((entries) => {\n      for (const entry of entries) {\n        const { width, height } = entry.contentRect;\n        if (width > 0 && height > 0) {\n          modelEngine.resize(width, height);\n        }\n      }\n    });\n    resizeObserver.observe(container);\n\n    return () => {\n      resizeObserver.disconnect();\n      modelEngine.destroy();\n      engineRef.current = null;\n    };\n  }, [onEngineReady]);\n\n  // Update camera from state\n  useEffect(() => {\n    if (!engineRef.current) return;\n\n    const scene = engineRef.current.getScene();\n    if (!scene) return;\n\n    const { distance, theta, phi, target } = cameraState;\n    const clampedPhi = Math.max(0.1, Math.min(Math.PI - 0.1, phi));\n\n    scene.camera.position = {\n      x: target.x + distance * Math.sin(clampedPhi) * Math.sin(theta),\n      y: target.y + distance * Math.cos(clampedPhi),\n      z: target.z + distance * Math.sin(clampedPhi) * Math.cos(theta),\n    };\n    scene.camera.target = target;\n  }, [cameraState]);\n\n  // Render loop\n  useEffect(() => {\n    if (!engineRef.current) return;\n\n    const renderLoop = () => {\n      if (engineRef.current) {\n        engineRef.current.render(tool, selectionMode, editMode === 'edit');\n      }\n    };\n\n    const intervalId = setInterval(renderLoop, 16); // ~60fps\n    return () => clearInterval(intervalId);\n  }, [tool, selectionMode, editMode]);\n\n  // Mouse handlers\n  const handlePointerDown = useCallback(\n    (e: React.PointerEvent) => {\n      const canvas = canvasRef.current;\n      if (!canvas || !engineRef.current) return;\n\n      canvas.setPointerCapture(e.pointerId);\n      lastMouseRef.current = { x: e.clientX, y: e.clientY };\n\n      // Middle mouse or shift+left for orbit/pan\n      if (e.button === 1 || (e.button === 0 && e.shiftKey)) {\n        if (e.altKey) {\n          isPanningRef.current = true;\n        } else {\n          isDraggingRef.current = true;\n        }\n        return;\n      }\n\n      // Left click for selection\n      if (e.button === 0 && tool === 'select') {\n        const rect = canvas.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n\n        const camera = engineRef.current.getCamera();\n        if (!camera) return;\n\n        const ray = getRayFromMouse(x, y, rect.width, rect.height, camera);\n        const meshes = engineRef.current.getMeshes();\n        const hit = raycast(ray, meshes);\n\n        if (hit) {\n          onSelect(hit.meshId, e.ctrlKey || e.metaKey);\n        } else if (!e.ctrlKey && !e.metaKey) {\n          onSelect(null, false);\n        }\n      }\n    },\n    [tool, onSelect]\n  );\n\n  const handlePointerMove = useCallback(\n    (e: React.PointerEvent) => {\n      if (!isDraggingRef.current && !isPanningRef.current) return;\n\n      const dx = e.clientX - lastMouseRef.current.x;\n      const dy = e.clientY - lastMouseRef.current.y;\n      lastMouseRef.current = { x: e.clientX, y: e.clientY };\n\n      if (isDraggingRef.current) {\n        // Orbit\n        setCameraState((prev) => ({\n          ...prev,\n          theta: prev.theta - dx * 0.005,\n          phi: Math.max(0.1, Math.min(Math.PI - 0.1, prev.phi + dy * 0.005)),\n        }));\n      } else if (isPanningRef.current) {\n        // Pan\n        const panSpeed = cameraState.distance * 0.001;\n        setCameraState((prev) => ({\n          ...prev,\n          target: {\n            x: prev.target.x - dx * panSpeed,\n            y: prev.target.y + dy * panSpeed,\n            z: prev.target.z,\n          },\n        }));\n      }\n    },\n    [cameraState.distance]\n  );\n\n  const handlePointerUp = useCallback((e: React.PointerEvent) => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      canvas.releasePointerCapture(e.pointerId);\n    }\n    isDraggingRef.current = false;\n    isPanningRef.current = false;\n  }, []);\n\n  const handleWheel = useCallback((e: React.WheelEvent) => {\n    e.preventDefault();\n    const delta = e.deltaY * 0.01;\n    setCameraState((prev) => ({\n      ...prev,\n      distance: Math.max(1, Math.min(100, prev.distance + delta)),\n    }));\n  }, []);\n\n  return (\n    <div ref={containerRef} className=\"relative w-full h-full bg-gray-900\">\n      <canvas\n        ref={canvasRef}\n        onPointerDown={handlePointerDown}\n        onPointerMove={handlePointerMove}\n        onPointerUp={handlePointerUp}\n        onPointerCancel={handlePointerUp}\n        onWheel={handleWheel}\n        className=\"w-full h-full cursor-crosshair\"\n        style={{ touchAction: 'none' }}\n      />\n\n      {/* View indicator */}\n      <div className=\"absolute top-2 left-2 text-xs text-white/50\">\n        Perspective\n      </div>\n\n      {/* FPS counter */}\n      <div className=\"absolute top-2 right-2 text-xs text-white/40 font-mono\">\n        {engine?.getState().fps ?? 0} FPS\n      </div>\n    </div>\n  );\n}\n","/**\n * Viewport Overlay Component\n *\n * Overlay UI elements on the viewport (axes indicator, selection info, etc.)\n */\n\nimport React from 'react';\nimport type { Vec3, TransformTool, SelectionState } from '../types';\n\nexport interface ViewportOverlayProps {\n  tool: TransformTool;\n  selection: SelectionState;\n  cameraRotation: { theta: number; phi: number };\n}\n\nexport function ViewportOverlay({\n  tool,\n  selection,\n  cameraRotation,\n}: ViewportOverlayProps): React.ReactElement {\n  // Calculate axis orientation based on camera rotation\n  const { theta, phi } = cameraRotation;\n\n  // Simple 2D projection of axes for the corner indicator\n  const axisLength = 20;\n  const xAxis = {\n    x: Math.cos(theta) * axisLength,\n    y: -Math.sin(phi) * Math.sin(theta) * axisLength,\n  };\n  const yAxis = {\n    x: 0,\n    y: -Math.cos(phi) * axisLength,\n  };\n  const zAxis = {\n    x: Math.sin(theta) * axisLength,\n    y: Math.sin(phi) * Math.cos(theta) * axisLength,\n  };\n\n  return (\n    <>\n      {/* Axes indicator */}\n      <div className=\"absolute bottom-4 left-4 w-16 h-16\">\n        <svg viewBox=\"-30 -30 60 60\" className=\"w-full h-full\">\n          {/* X axis (red) */}\n          <line x1=\"0\" y1=\"0\" x2={xAxis.x} y2={xAxis.y} stroke=\"#ef4444\" strokeWidth=\"2\" />\n          <text x={xAxis.x * 1.3} y={xAxis.y * 1.3} fill=\"#ef4444\" fontSize=\"8\" textAnchor=\"middle\" dominantBaseline=\"middle\">\n            X\n          </text>\n\n          {/* Y axis (green) */}\n          <line x1=\"0\" y1=\"0\" x2={yAxis.x} y2={yAxis.y} stroke=\"#22c55e\" strokeWidth=\"2\" />\n          <text x={yAxis.x * 1.3} y={yAxis.y * 1.3 - 5} fill=\"#22c55e\" fontSize=\"8\" textAnchor=\"middle\" dominantBaseline=\"middle\">\n            Y\n          </text>\n\n          {/* Z axis (blue) */}\n          <line x1=\"0\" y1=\"0\" x2={zAxis.x} y2={zAxis.y} stroke=\"#3b82f6\" strokeWidth=\"2\" />\n          <text x={zAxis.x * 1.3} y={zAxis.y * 1.3} fill=\"#3b82f6\" fontSize=\"8\" textAnchor=\"middle\" dominantBaseline=\"middle\">\n            Z\n          </text>\n\n          {/* Center dot */}\n          <circle cx=\"0\" cy=\"0\" r=\"2\" fill=\"white\" opacity=\"0.5\" />\n        </svg>\n      </div>\n\n      {/* Tool indicator */}\n      <div className=\"absolute bottom-4 right-4 px-2 py-1 bg-black/50 rounded text-xs text-white/70\">\n        {tool === 'select' && 'Select (Q)'}\n        {tool === 'move' && 'Move (G)'}\n        {tool === 'rotate' && 'Rotate (R)'}\n        {tool === 'scale' && 'Scale (S)'}\n      </div>\n\n      {/* Selection count */}\n      {selection.selectedObjects.length > 0 && (\n        <div className=\"absolute top-4 left-1/2 -translate-x-1/2 px-3 py-1 bg-blue-500/80 rounded text-xs text-white\">\n          {selection.selectedObjects.length} object{selection.selectedObjects.length !== 1 ? 's' : ''} selected\n        </div>\n      )}\n    </>\n  );\n}\n","/**\n * Status Bar Component\n *\n * Bottom status bar with scene stats and hints.\n */\n\nimport React from 'react';\nimport type { EditMode, SelectionMode, EditableMesh, SelectionState } from '../types';\n\nexport interface StatusBarProps {\n  meshes: EditableMesh[];\n  selection: SelectionState;\n  editMode: EditMode;\n  selectionMode: SelectionMode;\n  fps: number;\n  triangles: number;\n}\n\nexport function StatusBar({\n  meshes,\n  selection,\n  editMode,\n  selectionMode,\n  fps,\n  triangles,\n}: StatusBarProps): React.ReactElement {\n  // Calculate totals\n  const totalVertices = meshes.reduce((sum, m) => sum + m.geometry.vertexCount, 0);\n  const totalFaces = meshes.reduce((sum, m) => sum + m.geometry.faces.length, 0);\n\n  // Get hint based on current state\n  const getHint = (): string => {\n    if (editMode === 'object') {\n      if (selection.selectedObjects.length === 0) {\n        return 'Click to select | Shift+A to add | Tab for edit mode';\n      }\n      return 'G move | R rotate | S scale | X delete | D duplicate';\n    } else {\n      if (selectionMode === 'vertex') {\n        return 'Click vertices to select | E extrude | G move';\n      } else if (selectionMode === 'edge') {\n        return 'Click edges to select | Ctrl+R loop cut';\n      } else {\n        return 'Click faces to select | E extrude | I inset';\n      }\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-between px-3 py-1 bg-black/40 border-t border-white/10 text-xs text-white/60\">\n      {/* Left: Hint */}\n      <div className=\"flex-1 truncate\">\n        {getHint()}\n      </div>\n\n      {/* Center: Edit mode info */}\n      {editMode === 'edit' && (\n        <div className=\"flex items-center gap-3 mx-4\">\n          <button\n            className={`px-2 py-0.5 rounded ${selectionMode === 'vertex' ? 'bg-blue-500/50 text-white' : 'text-white/50'}`}\n          >\n            Vertex\n          </button>\n          <button\n            className={`px-2 py-0.5 rounded ${selectionMode === 'edge' ? 'bg-blue-500/50 text-white' : 'text-white/50'}`}\n          >\n            Edge\n          </button>\n          <button\n            className={`px-2 py-0.5 rounded ${selectionMode === 'face' ? 'bg-blue-500/50 text-white' : 'text-white/50'}`}\n          >\n            Face\n          </button>\n        </div>\n      )}\n\n      {/* Right: Stats */}\n      <div className=\"flex items-center gap-4 text-white/40 font-mono\">\n        <span>Objs: {meshes.length}</span>\n        <span>Verts: {totalVertices.toLocaleString()}</span>\n        <span>Faces: {totalFaces.toLocaleString()}</span>\n        <span>Tris: {triangles.toLocaleString()}</span>\n        <span className=\"text-green-400/60\">{fps} FPS</span>\n      </div>\n    </div>\n  );\n}\n","/**\n * zModel - Professional 3D Modeling Application\n *\n * A Blender-inspired 3D modeling application built on the z-os4 graphics engine.\n *\n * Features:\n * - 3D viewport with orbit/pan/zoom navigation\n * - Primitive creation (cube, sphere, cylinder, plane, torus)\n * - Transform tools (move, rotate, scale)\n * - Edit mode (vertex, edge, face selection)\n * - Mesh modifiers (extrude, loop cut, subdivide)\n * - Material editor\n * - Scene outliner\n */\n\nimport { useState, useCallback, useEffect, useRef } from 'react';\nimport type {\n  TransformTool,\n  EditMode,\n  SelectionMode,\n  ShadingMode,\n  PrimitiveType,\n  EditableMesh,\n  SelectionState,\n  Vec3,\n  Color,\n  ModelCommand,\n} from './types';\nimport { ModelEngine } from './engine/ModelEngine';\nimport { createPrimitive } from './engine/primitives';\nimport { Toolbar } from './components/Toolbar';\nimport { Outliner } from './components/Outliner';\nimport { PropertiesPanel } from './components/PropertiesPanel';\nimport { Viewport } from './components/Viewport';\nimport { ViewportOverlay } from './components/ViewportOverlay';\nimport { StatusBar } from './components/StatusBar';\n\n// ============================================================================\n// Main App Component\n// ============================================================================\n\nexport interface ZModelAppProps {\n  className?: string;\n}\n\nexport function ZModelApp({ className = '' }: ZModelAppProps): React.ReactElement {\n  // Engine state\n  const [engine, setEngine] = useState<ModelEngine | null>(null);\n  const [meshes, setMeshes] = useState<EditableMesh[]>([]);\n  const [selection, setSelection] = useState<SelectionState>({\n    selectedObjects: [],\n    selectedVertices: [],\n    selectedEdges: [],\n    selectedFaces: [],\n    activeObject: null,\n  });\n\n  // Tool state\n  const [tool, setTool] = useState<TransformTool>('select');\n  const [editMode, setEditMode] = useState<EditMode>('object');\n  const [selectionMode, setSelectionMode] = useState<SelectionMode>('vertex');\n  const [shadingMode, setShadingMode] = useState<ShadingMode>('solid');\n  const [snapToGrid, setSnapToGrid] = useState(false);\n  const [_gridSize, _setGridSize] = useState(0.25);\n\n  // UI state\n  const [showOutliner, setShowOutliner] = useState(true);\n  const [showProperties, setShowProperties] = useState(true);\n  const [fps, setFps] = useState(0);\n  const [triangles, setTriangles] = useState(0);\n\n  // History state\n  const [history, setHistory] = useState<ModelCommand[]>([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n\n  // Camera state for overlay\n  const [cameraRotation, _setCameraRotation] = useState({ theta: Math.PI / 4, phi: Math.PI / 3 });\n\n  // Refs\n  const engineRef = useRef<ModelEngine | null>(null);\n\n  // ============================================================================\n  // Engine callbacks\n  // ============================================================================\n\n  const handleEngineReady = useCallback((newEngine: ModelEngine) => {\n    setEngine(newEngine);\n    engineRef.current = newEngine;\n\n    // Subscribe to state updates\n    newEngine.subscribe((state) => {\n      setFps(state.fps);\n      setTriangles(state.triangles);\n    });\n\n    // Add initial cube\n    const cube = createPrimitive('cube');\n    cube.name = 'Cube';\n    newEngine.addMesh(cube);\n    setMeshes([cube]);\n  }, []);\n\n  // Sync meshes from engine\n  const syncMeshes = useCallback(() => {\n    if (engineRef.current) {\n      setMeshes([...engineRef.current.getMeshes()]);\n      setSelection(engineRef.current.getSelection());\n    }\n  }, []);\n\n  // ============================================================================\n  // Selection handling\n  // ============================================================================\n\n  const handleSelect = useCallback((meshId: string | null, addToSelection: boolean) => {\n    if (!engineRef.current) return;\n\n    if (meshId) {\n      engineRef.current.selectObject(meshId, addToSelection);\n    } else if (!addToSelection) {\n      engineRef.current.deselectAll();\n    }\n\n    syncMeshes();\n  }, [syncMeshes]);\n\n  // ============================================================================\n  // Object operations\n  // ============================================================================\n\n  const handleAddPrimitive = useCallback((type: PrimitiveType) => {\n    if (!engineRef.current) return;\n\n    const mesh = createPrimitive(type);\n    mesh.name = type.charAt(0).toUpperCase() + type.slice(1);\n\n    // Position new object at 3D cursor or offset from existing\n    const selectedMesh = meshes.find((m) => m.id === selection.activeObject);\n    if (selectedMesh) {\n      mesh.transform.position = {\n        x: selectedMesh.transform.position.x + 2,\n        y: selectedMesh.transform.position.y,\n        z: selectedMesh.transform.position.z,\n      };\n    }\n\n    engineRef.current.addMesh(mesh);\n    engineRef.current.selectObject(mesh.id);\n    syncMeshes();\n\n    // Add to history\n    addCommand({\n      type: 'add',\n      description: `Add ${mesh.name}`,\n      execute: () => {\n        engineRef.current?.addMesh(mesh);\n        engineRef.current?.selectObject(mesh.id);\n        syncMeshes();\n      },\n      undo: () => {\n        engineRef.current?.removeMesh(mesh.id);\n        syncMeshes();\n      },\n    });\n  }, [meshes, selection.activeObject, syncMeshes]);\n\n  const handleDelete = useCallback(() => {\n    if (!engineRef.current) return;\n\n    const toDelete = [...selection.selectedObjects];\n    const deletedMeshes = toDelete\n      .map((id) => engineRef.current?.getMesh(id))\n      .filter((m): m is EditableMesh => !!m);\n\n    for (const id of toDelete) {\n      engineRef.current.removeMesh(id);\n    }\n    syncMeshes();\n\n    addCommand({\n      type: 'delete',\n      description: `Delete ${toDelete.length} object(s)`,\n      execute: () => {\n        for (const id of toDelete) {\n          engineRef.current?.removeMesh(id);\n        }\n        syncMeshes();\n      },\n      undo: () => {\n        for (const mesh of deletedMeshes) {\n          engineRef.current?.addMesh(mesh);\n        }\n        syncMeshes();\n      },\n    });\n  }, [selection.selectedObjects, syncMeshes]);\n\n  const handleDuplicate = useCallback(() => {\n    if (!engineRef.current) return;\n\n    const duplicates: EditableMesh[] = [];\n    for (const id of selection.selectedObjects) {\n      const dup = engineRef.current.duplicateMesh(id);\n      if (dup) duplicates.push(dup);\n    }\n\n    if (duplicates.length > 0) {\n      engineRef.current.setSelection({\n        selectedObjects: duplicates.map((m) => m.id),\n        activeObject: duplicates[0].id,\n      });\n      syncMeshes();\n    }\n  }, [selection.selectedObjects, syncMeshes]);\n\n  // ============================================================================\n  // Outliner callbacks\n  // ============================================================================\n\n  const handleToggleVisibility = useCallback((id: string) => {\n    if (!engineRef.current) return;\n    const mesh = engineRef.current.getMesh(id);\n    if (mesh) {\n      engineRef.current.updateMesh(id, { visible: !mesh.visible });\n      syncMeshes();\n    }\n  }, [syncMeshes]);\n\n  const handleToggleLock = useCallback((id: string) => {\n    if (!engineRef.current) return;\n    const mesh = engineRef.current.getMesh(id);\n    if (mesh) {\n      engineRef.current.updateMesh(id, { locked: !mesh.locked });\n      syncMeshes();\n    }\n  }, [syncMeshes]);\n\n  const handleRename = useCallback((id: string, name: string) => {\n    if (!engineRef.current) return;\n    engineRef.current.updateMesh(id, { name });\n    syncMeshes();\n  }, [syncMeshes]);\n\n  const handleDeleteFromOutliner = useCallback((id: string) => {\n    if (!engineRef.current) return;\n    engineRef.current.removeMesh(id);\n    syncMeshes();\n  }, [syncMeshes]);\n\n  // ============================================================================\n  // Properties callbacks\n  // ============================================================================\n\n  const handleUpdateTransform = useCallback((updates: Partial<{ position: Vec3; rotation: Vec3; scale: Vec3 }>) => {\n    if (!engineRef.current || !selection.activeObject) return;\n    const mesh = engineRef.current.getMesh(selection.activeObject);\n    if (mesh) {\n      engineRef.current.updateMesh(selection.activeObject, {\n        transform: { ...mesh.transform, ...updates },\n      });\n      syncMeshes();\n    }\n  }, [selection.activeObject, syncMeshes]);\n\n  const handleUpdateMaterial = useCallback((updates: Partial<{ color: Color; ambient: number; diffuse: number; specular: number; shininess: number; opacity: number }>) => {\n    if (!engineRef.current || !selection.activeObject) return;\n    const mesh = engineRef.current.getMesh(selection.activeObject);\n    if (mesh) {\n      engineRef.current.updateMesh(selection.activeObject, {\n        material: { ...mesh.material, ...updates },\n      });\n      syncMeshes();\n    }\n  }, [selection.activeObject, syncMeshes]);\n\n  // ============================================================================\n  // History (Undo/Redo)\n  // ============================================================================\n\n  const addCommand = useCallback((command: ModelCommand) => {\n    setHistory((prev) => {\n      const newHistory = prev.slice(0, historyIndex + 1);\n      newHistory.push(command);\n      return newHistory;\n    });\n    setHistoryIndex((prev) => prev + 1);\n  }, [historyIndex]);\n\n  const handleUndo = useCallback(() => {\n    if (historyIndex < 0) return;\n    const command = history[historyIndex];\n    command.undo();\n    setHistoryIndex((prev) => prev - 1);\n  }, [history, historyIndex]);\n\n  const handleRedo = useCallback(() => {\n    if (historyIndex >= history.length - 1) return;\n    const command = history[historyIndex + 1];\n    command.execute();\n    setHistoryIndex((prev) => prev + 1);\n  }, [history, historyIndex]);\n\n  // ============================================================================\n  // Keyboard shortcuts\n  // ============================================================================\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Ignore if typing in input\n      if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) {\n        return;\n      }\n\n      const key = e.key.toLowerCase();\n\n      // Tool shortcuts\n      if (key === 'q') setTool('select');\n      if (key === 'g') setTool('move');\n      if (key === 'r') setTool('rotate');\n      if (key === 's' && !e.ctrlKey && !e.metaKey) setTool('scale');\n\n      // Edit mode\n      if (key === 'tab') {\n        e.preventDefault();\n        setEditMode((m) => (m === 'object' ? 'edit' : 'object'));\n      }\n\n      // Selection mode (in edit mode)\n      if (editMode === 'edit') {\n        if (key === '1') setSelectionMode('vertex');\n        if (key === '2') setSelectionMode('edge');\n        if (key === '3') setSelectionMode('face');\n      }\n\n      // Delete\n      if (key === 'x' || key === 'delete') {\n        handleDelete();\n      }\n\n      // Duplicate\n      if (key === 'd' && (e.ctrlKey || e.metaKey)) {\n        e.preventDefault();\n        handleDuplicate();\n      }\n\n      // Undo/Redo\n      if (key === 'z' && (e.ctrlKey || e.metaKey)) {\n        e.preventDefault();\n        if (e.shiftKey) {\n          handleRedo();\n        } else {\n          handleUndo();\n        }\n      }\n\n      // Add menu (Shift+A)\n      if (key === 'a' && e.shiftKey) {\n        e.preventDefault();\n        handleAddPrimitive('cube');\n      }\n\n      // Select all\n      if (key === 'a' && !e.shiftKey) {\n        e.preventDefault();\n        if (engineRef.current) {\n          const allIds = meshes.filter((m) => m.visible && !m.locked).map((m) => m.id);\n          engineRef.current.setSelection({\n            selectedObjects: allIds,\n            activeObject: allIds[0] ?? null,\n          });\n          syncMeshes();\n        }\n      }\n\n      // Focus on selected (.)\n      if (key === '.') {\n        if (engineRef.current && selection.activeObject) {\n          const mesh = engineRef.current.getMesh(selection.activeObject);\n          if (mesh) {\n            const scene = engineRef.current.getScene();\n            if (scene) {\n              scene.camera.target = { ...mesh.transform.position };\n            }\n          }\n        }\n      }\n\n      // Hide panels\n      if (key === 'n') setShowProperties((v) => !v);\n      if (key === 't') setShowOutliner((v) => !v);\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [editMode, meshes, selection, handleDelete, handleDuplicate, handleUndo, handleRedo, handleAddPrimitive, syncMeshes]);\n\n  // ============================================================================\n  // Get selected mesh for properties\n  // ============================================================================\n\n  const selectedMesh = selection.activeObject\n    ? meshes.find((m) => m.id === selection.activeObject) ?? null\n    : null;\n\n  // ============================================================================\n  // Render\n  // ============================================================================\n\n  return (\n    <div className={`flex flex-col h-full bg-gray-900 text-white ${className}`}>\n      {/* Toolbar */}\n      <Toolbar\n        tool={tool}\n        editMode={editMode}\n        shadingMode={shadingMode}\n        snapToGrid={snapToGrid}\n        onToolChange={setTool}\n        onEditModeChange={setEditMode}\n        onShadingModeChange={setShadingMode}\n        onSnapToGridChange={setSnapToGrid}\n        onAddPrimitive={handleAddPrimitive}\n        onUndo={handleUndo}\n        onRedo={handleRedo}\n        canUndo={historyIndex >= 0}\n        canRedo={historyIndex < history.length - 1}\n      />\n\n      {/* Main content */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Outliner */}\n        {showOutliner && (\n          <div className=\"w-56 border-r border-white/10 flex-shrink-0\">\n            <Outliner\n              meshes={meshes}\n              selection={selection}\n              onSelect={handleSelect}\n              onToggleVisibility={handleToggleVisibility}\n              onToggleLock={handleToggleLock}\n              onRename={handleRename}\n              onDelete={handleDeleteFromOutliner}\n            />\n          </div>\n        )}\n\n        {/* Viewport */}\n        <div className=\"flex-1 relative\">\n          <Viewport\n            engine={engine}\n            tool={tool}\n            editMode={editMode}\n            selectionMode={selectionMode}\n            shadingMode={shadingMode}\n            onEngineReady={handleEngineReady}\n            onSelect={handleSelect}\n          />\n          <ViewportOverlay\n            tool={tool}\n            selection={selection}\n            cameraRotation={cameraRotation}\n          />\n        </div>\n\n        {/* Properties Panel */}\n        {showProperties && (\n          <div className=\"w-64 border-l border-white/10 flex-shrink-0\">\n            <PropertiesPanel\n              selectedMesh={selectedMesh}\n              onUpdateTransform={handleUpdateTransform}\n              onUpdateMaterial={handleUpdateMaterial}\n            />\n          </div>\n        )}\n      </div>\n\n      {/* Status Bar */}\n      <StatusBar\n        meshes={meshes}\n        selection={selection}\n        editMode={editMode}\n        selectionMode={selectionMode}\n        fps={fps}\n        triangles={triangles}\n      />\n    </div>\n  );\n}\n\n// ============================================================================\n// App Icon\n// ============================================================================\n\nexport function ZModelIcon(): React.ReactElement {\n  return (\n    <svg viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <linearGradient id=\"zmodel-grad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n          <stop offset=\"0%\" stopColor=\"#6366f1\" />\n          <stop offset=\"100%\" stopColor=\"#8b5cf6\" />\n        </linearGradient>\n      </defs>\n      <rect width=\"64\" height=\"64\" rx=\"14\" fill=\"url(#zmodel-grad)\" />\n      {/* 3D cube wireframe */}\n      <g stroke=\"white\" strokeWidth=\"2\" fill=\"none\" opacity=\"0.9\">\n        {/* Front face */}\n        <path d=\"M20 24 L44 24 L44 48 L20 48 Z\" />\n        {/* Back face (offset) */}\n        <path d=\"M28 16 L52 16 L52 40 L28 40\" strokeDasharray=\"2 2\" opacity=\"0.5\" />\n        {/* Connecting edges */}\n        <path d=\"M20 24 L28 16\" />\n        <path d=\"M44 24 L52 16\" />\n        <path d=\"M44 48 L52 40\" />\n        <path d=\"M20 48 L28 40\" strokeDasharray=\"2 2\" opacity=\"0.5\" />\n      </g>\n      {/* Axes indicator */}\n      <g strokeWidth=\"2\">\n        <line x1=\"12\" y1=\"52\" x2=\"20\" y2=\"52\" stroke=\"#ef4444\" />\n        <line x1=\"12\" y1=\"52\" x2=\"12\" y2=\"44\" stroke=\"#22c55e\" />\n        <line x1=\"12\" y1=\"52\" x2=\"8\" y2=\"56\" stroke=\"#3b82f6\" />\n      </g>\n    </svg>\n  );\n}\n\n// ============================================================================\n// Default export for zOS app loader\n// ============================================================================\n\nexport default ZModelApp;\n"]}